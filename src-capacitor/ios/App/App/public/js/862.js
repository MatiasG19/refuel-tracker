"use strict";(self["webpackChunkrefuel_tracker"]=self["webpackChunkrefuel_tracker"]||[]).push([[862],{2862:(e,t,l)=>{l.r(t),l.d(t,{default:()=>H});var a=l(3673),u=l(1959),n=l(5616),o=l(9582),d=l(605),i=l(1036),r=l(9496),s=l(7616),c=l(8512);function v(e){return e.replace(",",".")}var m=function(e,t,l,a){function u(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,n){function o(e){try{i(a.next(e))}catch(t){n(t)}}function d(e){try{i(a["throw"](e))}catch(t){n(t)}}function i(e){e.done?l(e.value):u(e.value).then(o,d)}i((a=a.apply(e,t||[])).next())}))};const p={class:"row items-center justify-end"},f={class:"row items-center justify-end"},D={class:"row"},w=(0,a.aZ)({props:{id:{type:Number}},setup(e){const t=e,l=(0,o.tv)(),w=(0,s.n)(),S=(0,u.iH)(new c.CD),U=(0,u.iH)(n.ZP.formatDate(Date.now(),"YYYY/MM/DD")),b=(0,u.iH)(n.ZP.formatDate(Date.now(),"HH:mm"));let y="";function h(e){const t=new Date(e);U.value=n.ZP.formatDate(t,"YYYY/MM/DD"),S.value.date||(S.value.date=t),S.value.date.setFullYear(t.getFullYear()),S.value.date.setMonth(t.getMonth()),S.value.date.setDate(t.getDate())}function Z(e){const t=e.split(":"),l=parseInt(t[0]),a=parseInt(t[1]),u=new Date(Date.now());S.value.date||(S.value.date=u),u.setHours(l),u.setMinutes(a),b.value=n.ZP.formatDate(u,"HH:mm"),S.value.date.setHours(l),S.value.date.setMinutes(a)}function Y(){return m(this,void 0,void 0,(function*(){y.includes("/add")?yield w.addRefuel(Object.assign({},S.value)):y.includes("/edit")&&(yield w.updateRefuel(Object.assign({},S.value))),l.push("/refuels")}))}return(0,a.bv)((()=>m(this,void 0,void 0,(function*(){var e;if(y=l.currentRoute.value.path.toLocaleLowerCase(),y.includes("/add")?i.emitter.emit("updateTitle","Add refuel"):y.includes("/edit")&&i.emitter.emit("updateTitle","Edit refuel"),S.value.vehicleId=null!==(e=w.selectedVehicleId)&&void 0!==e?e:0,t.id){const e=yield w.getRefuel(t.id);e?(S.value.id=e.id,S.value.payedAmount=e.payedAmount,S.value.refueledAmount=e.refueledAmount,S.value.distanceDriven=e.distanceDriven,y.includes("/edit")&&(S.value.date=e.date,U.value=n.ZP.formatDate(e.date,"YYYY/MM/DD"),b.value=n.ZP.formatDate(e.date,"HH:mm"))):console.error("Refuel not found!")}else S.value.date=new Date(Date.now())})))),(e,t)=>{const l=(0,a.up)("q-date"),n=(0,a.up)("q-btn"),o=(0,a.up)("q-popup-proxy"),i=(0,a.up)("q-time"),s=(0,a.up)("q-space"),c=(0,a.up)("q-form"),m=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(c,{onSubmit:Y,class:"q-pa-md q-gutter-md"},{default:(0,a.w5)((()=>{var c,w,y;return[(0,a.Wm)(d.Z,{value:null===(c=S.value.payedAmount)||void 0===c?void 0:c.toString(),"onUpdate:modelValue":t[0]||(t[0]=e=>S.value.payedAmount=(0,u.SU)(v)(e)),label:"Payed amount",rules:[(0,u.SU)(r.Mo),(0,u.SU)(r.gI),(0,u.SU)(r.pI),(0,u.SU)(r.RY)],autofocus:""},null,8,["value","rules"]),(0,a.Wm)(d.Z,{value:null===(w=S.value.distanceDriven)||void 0===w?void 0:w.toString(),"onUpdate:modelValue":t[1]||(t[1]=e=>S.value.distanceDriven=(0,u.SU)(v)(e)),label:"Distance driven",rules:[(0,u.SU)(r.Mo),(0,u.SU)(r.gI),(0,u.SU)(r.pI),(0,u.SU)(r.RY)]},null,8,["value","rules"]),(0,a.Wm)(d.Z,{value:null===(y=S.value.refueledAmount)||void 0===y?void 0:y.toString(),"onUpdate:modelValue":t[2]||(t[2]=e=>S.value.refueledAmount=(0,u.SU)(v)(e)),label:"Refuled amount",rules:[(0,u.SU)(r.Mo),(0,u.SU)(r.gI),(0,u.SU)(r.pI),(0,u.SU)(r.RY)]},null,8,["value","rules"]),(0,a.Wm)(d.Z,{value:U.value,label:"Refuel date",rules:[(0,u.SU)(r.Mo)]},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{modelValue:U.value,"onUpdate:modelValue":t[3]||(t[3]=e=>h(e))},null,8,["modelValue"]),(0,a._)("div",p,[(0,a.wy)((0,a.Wm)(n,{label:"Close",color:"primary",flat:""},null,512),[[m]])])])),_:1})])),_:1},8,["value","rules"]),(0,a.Wm)(d.Z,{value:b.value,label:"Refuel time",rules:[(0,u.SU)(r.Mo)]},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=e=>Z(e)),format24h:""},null,8,["modelValue"]),(0,a._)("div",f,[(0,a.wy)((0,a.Wm)(n,{label:"Close",color:"primary",flat:""},null,512),[[m]])])])),_:1})])),_:1},8,["value","rules"]),(0,a._)("div",D,[(0,a.Wm)(n,{color:"negative",label:"Cancel","no-caps":"",class:"btn",onClick:t[5]||(t[5]=t=>e.$router.go(-1))}),(0,a.Wm)(s),(0,a.Wm)(n,{color:"positive",label:"Confirm",type:"submit","no-caps":"",class:"btn"})])]})),_:1})])}}});var S=l(4260),U=l(5269),b=l(3944),y=l(5626),h=l(8240),Z=l(5990),Y=l(2025),g=l(677),M=l(7518),W=l.n(M);const _=(0,S.Z)(w,[["__scopeId","data-v-a6855b8c"]]),H=_;W()(w,"components",{QForm:U.Z,QPopupProxy:b.Z,QDate:y.Z,QBtn:h.Z,QTime:Z.Z,QSpace:Y.Z}),W()(w,"directives",{ClosePopup:g.Z})}}]);