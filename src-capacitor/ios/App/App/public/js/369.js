"use strict";(self["webpackChunkrefuel_tracker"]=self["webpackChunkrefuel_tracker"]||[]).push([[369],{4369:(e,t,a)=>{a.r(t),a.d(t,{default:()=>H});var l=a(3673),u=a(1959),n=a(5616),o=a(9582),d=a(605),i=a(1036),r=a(9496),s=a(4790),c=a(8512);function v(e){return e.replace(",",".")}var m=function(e,t,a,l){function u(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,n){function o(e){try{i(l.next(e))}catch(t){n(t)}}function d(e){try{i(l["throw"](e))}catch(t){n(t)}}function i(e){e.done?a(e.value):u(e.value).then(o,d)}i((l=l.apply(e,t||[])).next())}))};const p={class:"row items-center justify-end"},f={class:"row items-center justify-end"},D={class:"row"},w=(0,l.aZ)({props:{id:{type:Number}},setup(e){const t=e,a=(0,o.tv)(),w=(0,s.n)(),S=(0,s.F)(),U=(0,u.iH)(new c.CD),y=(0,u.iH)(n.ZP.formatDate(Date.now(),"YYYY/MM/DD")),b=(0,u.iH)(n.ZP.formatDate(Date.now(),"HH:mm"));let h="";function Z(e){const t=new Date(e);y.value=n.ZP.formatDate(t,"YYYY/MM/DD"),U.value.date||(U.value.date=t),U.value.date.setFullYear(t.getFullYear()),U.value.date.setMonth(t.getMonth()),U.value.date.setDate(t.getDate())}function Y(e){const t=e.split(":"),a=parseInt(t[0]),l=parseInt(t[1]),u=new Date(Date.now());U.value.date||(U.value.date=u),u.setHours(a),u.setMinutes(l),b.value=n.ZP.formatDate(u,"HH:mm"),U.value.date.setHours(a),U.value.date.setMinutes(l)}function g(){return m(this,void 0,void 0,(function*(){h.includes("/add")?yield w.addRefuel(Object.assign({},U.value)):h.includes("/edit")&&(yield w.updateRefuel(Object.assign({},U.value))),a.push("/refuels")}))}return(0,l.bv)((()=>m(this,void 0,void 0,(function*(){var e;if(h=a.currentRoute.value.path.toLocaleLowerCase(),h.includes("/add")?i.emitter.emit("updateTitle","Add refuel"):h.includes("/edit")&&i.emitter.emit("updateTitle","Edit refuel"),U.value.vehicleId=null!==(e=S.selectedVehicleId)&&void 0!==e?e:0,t.id){const e=yield w.getRefuel(t.id);e?(U.value.id=e.id,U.value.payedAmount=e.payedAmount,U.value.refueledAmount=e.refueledAmount,U.value.distanceDriven=e.distanceDriven,h.includes("/edit")&&(U.value.date=e.date,y.value=n.ZP.formatDate(e.date,"YYYY/MM/DD"),b.value=n.ZP.formatDate(e.date,"HH:mm"))):console.error("Refuel not found!")}else U.value.date=new Date(Date.now())})))),(e,t)=>{const a=(0,l.up)("q-date"),n=(0,l.up)("q-btn"),o=(0,l.up)("q-popup-proxy"),i=(0,l.up)("q-time"),s=(0,l.up)("q-space"),c=(0,l.up)("q-form"),m=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c,{onSubmit:g,class:"q-pa-md q-gutter-md"},{default:(0,l.w5)((()=>{var c,w,S;return[(0,l.Wm)(d.Z,{value:null===(c=U.value.payedAmount)||void 0===c?void 0:c.toString(),"onUpdate:modelValue":t[0]||(t[0]=e=>U.value.payedAmount=(0,u.SU)(v)(e)),label:"Payed amount",rules:[(0,u.SU)(r.Mo),(0,u.SU)(r.gI),(0,u.SU)(r.pI),(0,u.SU)(r.RY)],autofocus:""},null,8,["value","rules"]),(0,l.Wm)(d.Z,{value:null===(w=U.value.distanceDriven)||void 0===w?void 0:w.toString(),"onUpdate:modelValue":t[1]||(t[1]=e=>U.value.distanceDriven=(0,u.SU)(v)(e)),label:"Distance driven",rules:[(0,u.SU)(r.Mo),(0,u.SU)(r.gI),(0,u.SU)(r.pI),(0,u.SU)(r.RY)]},null,8,["value","rules"]),(0,l.Wm)(d.Z,{value:null===(S=U.value.refueledAmount)||void 0===S?void 0:S.toString(),"onUpdate:modelValue":t[2]||(t[2]=e=>U.value.refueledAmount=(0,u.SU)(v)(e)),label:"Refuled amount",rules:[(0,u.SU)(r.Mo),(0,u.SU)(r.gI),(0,u.SU)(r.pI),(0,u.SU)(r.RY)]},null,8,["value","rules"]),(0,l.Wm)(d.Z,{value:y.value,label:"Refuel date",rules:[(0,u.SU)(r.Mo)]},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{modelValue:y.value,"onUpdate:modelValue":t[3]||(t[3]=e=>Z(e))},null,8,["modelValue"]),(0,l._)("div",p,[(0,l.wy)((0,l.Wm)(n,{label:"Close",color:"primary",flat:""},null,512),[[m]])])])),_:1})])),_:1},8,["value","rules"]),(0,l.Wm)(d.Z,{value:b.value,label:"Refuel time",rules:[(0,u.SU)(r.Mo)]},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=e=>Y(e)),format24h:""},null,8,["modelValue"]),(0,l._)("div",f,[(0,l.wy)((0,l.Wm)(n,{label:"Close",color:"primary",flat:""},null,512),[[m]])])])),_:1})])),_:1},8,["value","rules"]),(0,l._)("div",D,[(0,l.Wm)(n,{color:"negative",label:"Cancel","no-caps":"",class:"btn",onClick:t[5]||(t[5]=t=>e.$router.go(-1))}),(0,l.Wm)(s),(0,l.Wm)(n,{color:"positive",label:"Confirm",type:"submit","no-caps":"",class:"btn"})])]})),_:1})])}}});var S=a(4260),U=a(5269),y=a(3944),b=a(5626),h=a(8240),Z=a(5990),Y=a(2025),g=a(677),M=a(7518),W=a.n(M);const _=(0,S.Z)(w,[["__scopeId","data-v-0303ac8a"]]),H=_;W()(w,"components",{QForm:U.Z,QPopupProxy:y.Z,QDate:b.Z,QBtn:h.Z,QTime:Z.Z,QSpace:Y.Z}),W()(w,"directives",{ClosePopup:g.Z})}}]);