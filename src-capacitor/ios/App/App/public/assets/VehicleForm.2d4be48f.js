import{$ as h,d as U,a9 as y,r as p,o as g,a1 as w,ac as C,f as t,a3 as N,ah as i,ag as S,ab as f}from"./index.af9e0f6e.js";import{Q as F}from"./QSpace.2d3c42d6.js";import{Q as q,_ as r,r as s,m as x}from"./index.2761fcb4.js";import{_ as I}from"./CSelect.9df630b2.js";import{emitter as v}from"./mitt.4e333a4b.js";import{u as Q}from"./settingsStore.5309004a.js";import{u as $}from"./refuelStore.e71e446b.js";import{V as B}from"./dexie.e9b82229.js";import"./QItem.8815b672.js";import"./QMenu.8ec9ede0.js";import"./selection.bf6e3a61.js";import"./use-virtual-scroll.52cd128c.js";import"./format.c860d4da.js";import"./i18n.a8414de4.js";import"./fuelConsumption.8f4bd1ed.js";const E={class:"row"},R=U({__name:"VehicleForm",props:{id:{type:Number}},setup(V){const n=y(),u=$(),b=Q(),l=p(new B),d=p([]);let o="";const m=V;async function _(){o.includes("/add")?await u.addVehicle({...l.value}):o.includes("/edit")&&(await b.changeSelectedVehicle({...l.value}),await u.updateVehicle({...l.value})),n.push("/vehicles")}return g(async()=>{if(m.id){const e=await u.getVehicle(m.id);e?(l.value.id=e.id,l.value.name=e.name,l.value.plateNumber=e.plateNumber,l.value.fuelUnitId=e.fuelUnitId,l.value.currencyUnit=e.currencyUnit):console.error("Vehicle not found!")}(await u.getFuelUnits()).forEach(e=>d.value.push({label:e.fuelConsumptionUnit,value:e.id})),o=n.currentRoute.value.path.toLocaleLowerCase(),o.includes("/add")?v.emit("updateTitle","Add vehicle"):o.includes("/edit")&&v.emit("updateTitle","Edit vehicle")}),(c,e)=>(w(),C("div",null,[t(q,{onSubmit:_,class:"q-pa-md q-gutter-md"},{default:N(()=>[t(r,{modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.name=a),label:"Vehicle name",rules:[i(s),i(x)],autofocus:""},null,8,["modelValue","rules"]),t(r,{modelValue:l.value.plateNumber,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.plateNumber=a),label:"Number plate",rules:[i(s)]},null,8,["modelValue","rules"]),t(I,{outlined:"",class:"q-pb-md",modelValue:l.value.fuelUnitId,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.fuelUnitId=a),options:d.value,label:"Fuel unit"},null,8,["modelValue","options"]),t(r,{class:"q-pb-md",modelValue:l.value.currencyUnit,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.currencyUnit=a),label:"Currency unit",rules:[i(s)]},null,8,["modelValue","rules"]),S("div",E,[t(f,{color:"negative",label:"Cancel","no-caps":"",class:"btn",onClick:e[4]||(e[4]=a=>c.$router.go(-1))}),t(F),t(f,{color:"positive",label:"Confirm",type:"submit","no-caps":"",class:"btn"})])]),_:1})]))}});var X=h(R,[["__scopeId","data-v-1718bfc8"]]);export{X as default};
