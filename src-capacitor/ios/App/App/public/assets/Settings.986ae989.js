import{a as ct,b as gt,Q as st}from"./QItem.7b9df1e0.js";import{a0 as It,aB as Dt,a2 as rt,P as $t,r as wt,o as Kt,a as Jt,Q as Mt,a5 as Gt,d as Se,U as Ee,Y as Nt,Z as ft,bj as Yt,a4 as Bt,aG as Ct}from"./index.dc551ac6.js";import{Q as St}from"./QList.e65e1e10.js";import"./CSelect.241b4b25.js";import{emitter as qt}from"./mitt.4e333a4b.js";import{u as Qt}from"./settingsStore.6d20ebcd.js";import{D as je,d as xt}from"./dexie.8617b804.js";import{g as zt}from"./index.815fece1.js";import"./QSelect.e1eefabe.js";import"./QMenu.b4d70c81.js";import"./selection.badb18f8.js";import"./use-virtual-scroll.ff57756e.js";import"./format.c860d4da.js";import"./index.6de444b0.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function it(y,v,c,h){function w(p){return p instanceof c?p:new c(function(o){o(p)})}return new(c||(c=Promise))(function(p,o){function x(E){try{s(h.next(E))}catch($){o($)}}function P(E){try{s(h.throw(E))}catch($){o($)}}function s(E){E.done?p(E.value):w(E.value).then(x,P)}s((h=h.apply(y,v||[])).next())})}function We(y,v){var c={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},h,w,p,o;return o={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function x(s){return function(E){return P([s,E])}}function P(s){if(h)throw new TypeError("Generator is already executing.");for(;c;)try{if(h=1,w&&(p=s[0]&2?w.return:s[0]?w.throw||((p=w.return)&&p.call(w),0):w.next)&&!(p=p.call(w,s[1])).done)return p;switch(w=0,p&&(s=[s[0]&2,p.value]),s[0]){case 0:case 1:p=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,w=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(p=c.trys,!(p=p.length>0&&p[p.length-1])&&(s[0]===6||s[0]===2)){c=0;continue}if(s[0]===3&&(!p||s[1]>p[0]&&s[1]<p[3])){c.label=s[1];break}if(s[0]===6&&c.label<p[1]){c.label=p[1],p=s;break}if(p&&c.label<p[2]){c.label=p[2],c.ops.push(s);break}p[2]&&c.ops.pop(),c.trys.pop();continue}s=v.call(y,c)}catch(E){s=[6,E],w=0}finally{h=p=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function Ht(y){var v=[y.schema.primKey].concat(y.schema.indexes);return v.map(function(c){return c.src}).join(",")}function Wt(y){for(var v={},c=0,h=y.tables;c<h.length;c++){var w=h[c];v[w.name]=w.schema}return v}function kt(y,v){return new Promise(function(c,h){var w=new FileReader;w.onabort=function(p){return h(new Error("file read aborted"))},w.onerror=function(p){return h(p.target.error)},w.onload=function(p){return c(p.target.result)},v==="binary"?w.readAsArrayBuffer(y):w.readAsText(y)})}function jt(y,v){if(typeof FileReaderSync=="undefined")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var c=new FileReaderSync,h=v==="binary"?c.readAsArrayBuffer(y):c.readAsText(y);return h}var Ot=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Et(y,v){return v={exports:{}},y(v,v.exports),v.exports}var vt=Et(function(y,v){(function(c,h){y.exports=h()})(Ot,function(){function c(f){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(d){return typeof d}:c=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},c(f)}function h(f,d,b,g,_,z,Z){try{var q=f[z](Z),j=q.value}catch(Ae){b(Ae);return}q.done?d(j):Promise.resolve(j).then(g,_)}function w(f){return function(){var d=this,b=arguments;return new Promise(function(g,_){var z=f.apply(d,b);function Z(j){h(z,g,_,Z,q,"next",j)}function q(j){h(z,g,_,Z,q,"throw",j)}Z(void 0)})}}function p(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function o(f,d){for(var b=0;b<d.length;b++){var g=d[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}function x(f,d,b){return d&&o(f.prototype,d),b&&o(f,b),f}function P(f,d,b){return d in f?Object.defineProperty(f,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):f[d]=b,f}function s(f,d){var b=Object.keys(f);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(f);d&&(g=g.filter(function(_){return Object.getOwnPropertyDescriptor(f,_).enumerable})),b.push.apply(b,g)}return b}function E(f){for(var d=1;d<arguments.length;d++){var b=arguments[d]!=null?arguments[d]:{};d%2?s(Object(b),!0).forEach(function(g){P(f,g,b[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(b)):s(Object(b)).forEach(function(g){Object.defineProperty(f,g,Object.getOwnPropertyDescriptor(b,g))})}return f}function $(f,d){return B(f)||X(f,d)||he()}function Be(f){return de(f)||M(f)||Le()}function de(f){if(Array.isArray(f)){for(var d=0,b=new Array(f.length);d<f.length;d++)b[d]=f[d];return b}}function B(f){if(Array.isArray(f))return f}function M(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}function X(f,d){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]"){var b=[],g=!0,_=!1,z=void 0;try{for(var Z=f[Symbol.iterator](),q;!(g=(q=Z.next()).done)&&(b.push(q.value),!(d&&b.length===d));g=!0);}catch(j){_=!0,z=j}finally{try{!g&&Z.return!=null&&Z.return()}finally{if(_)throw z}}return b}}function Le(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function he(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var A=function f(d){p(this,f),this.p=new Promise(d)};A.__typeson__type__="TypesonPromise",typeof Symbol!="undefined"&&(A.prototype[Symbol.toStringTag]="TypesonPromise"),A.prototype.then=function(f,d){var b=this;return new A(function(g,_){b.p.then(function(z){g(f?f(z):z)}).catch(function(z){return d?d(z):Promise.reject(z)}).then(g,_)})},A.prototype.catch=function(f){return this.then(null,f)},A.resolve=function(f){return new A(function(d){d(f)})},A.reject=function(f){return new A(function(d,b){b(f)})},["all","race"].forEach(function(f){A[f]=function(d){return new A(function(b,g){Promise[f](d.map(function(_){return _&&_.constructor&&_.constructor.__typeson__type__==="TypesonPromise"?_.p:_})).then(b,g)})}});var ue={},K=ue.toString,Te={}.hasOwnProperty,we=Object.getPrototypeOf,Ne=Te.toString;function u(f,d){return Q(f)&&typeof f.then=="function"&&(!d||typeof f.catch=="function")}function r(f){return K.call(f).slice(8,-1)}function m(f,d){if(!f||c(f)!=="object")return!1;var b=we(f);if(!b)return d===null;var g=Te.call(b,"constructor")&&b.constructor;return typeof g!="function"?d===null:d===g||d!==null&&Ne.call(g)===Ne.call(d)||typeof d=="function"&&typeof g.__typeson__type__=="string"&&g.__typeson__type__===d.__typeson__type__}function l(f){if(!f||r(f)!=="Object")return!1;var d=we(f);return d?m(f,Object):!0}function ee(f){if(!f||r(f)!=="Object")return!1;var d=we(f);return d?m(f,Object)||ee(d):!0}function Q(f){return f&&c(f)==="object"}function le(f){return f.replace(/~/g,"~0").replace(/\./g,"~1")}function ye(f){return f.replace(/~1/g,".").replace(/~0/g,"~")}function ve(f,d){if(d==="")return f;var b=d.indexOf(".");if(b>-1){var g=f[ye(d.slice(0,b))];return g===void 0?void 0:ve(g,d.slice(b+1))}return f[ye(d)]}function ne(f,d,b){if(d==="")return b;var g=d.indexOf(".");if(g>-1){var _=f[ye(d.slice(0,g))];return ne(_,d.slice(g+1),b)}return f[ye(d)]=b,f}function Ue(f){return f===null?"null":Array.isArray(f)?"array":c(f)}var Re=Object.keys,Ie=Array.isArray,Ke={}.hasOwnProperty,et=["type","replaced","iterateIn","iterateUnsetNumeric"];function U(f,d){if(f.keypath==="")return-1;var b=f.keypath.match(/\./g)||0,g=d.keypath.match(/\./g)||0;return b&&(b=b.length),g&&(g=g.length),b>g?-1:b<g?1:f.keypath<d.keypath?-1:f.keypath>d.keypath}var ie=function(){function f(d){p(this,f),this.options=d,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return x(f,[{key:"stringify",value:function(b,g,_,z){z=E({},this.options,{},z,{stringification:!0});var Z=this.encapsulate(b,null,z);return Ie(Z)?JSON.stringify(Z[0],g,_):Z.then(function(q){return JSON.stringify(q,g,_)})}},{key:"stringifySync",value:function(b,g,_,z){return this.stringify(b,g,_,E({throwOnBadSyncType:!0},z,{sync:!0}))}},{key:"stringifyAsync",value:function(b,g,_,z){return this.stringify(b,g,_,E({throwOnBadSyncType:!0},z,{sync:!1}))}},{key:"parse",value:function(b,g,_){return _=E({},this.options,{},_,{parse:!0}),this.revive(JSON.parse(b,g),_)}},{key:"parseSync",value:function(b,g,_){return this.parse(b,g,E({throwOnBadSyncType:!0},_,{sync:!0}))}},{key:"parseAsync",value:function(b,g,_){return this.parse(b,g,E({throwOnBadSyncType:!0},_,{sync:!1}))}},{key:"specialTypeNames",value:function(b,g){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _.returnTypeNames=!0,this.encapsulate(b,g,_)}},{key:"rootTypeName",value:function(b,g){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _.iterateNone=!0,this.encapsulate(b,g,_)}},{key:"encapsulate",value:function(b,g,_){_=E({sync:!0},this.options,{},_);var z=_,Z=z.sync,q=this,j={},Ae=[],xe=[],Fe=[],Ye="cyclic"in _?_.cyclic:!0,qe=_,Xe=qe.encapsulateObserver,Ve=oe("",b,Ye,g||{},Fe);function Qe(I){var n=Object.values(j);if(_.iterateNone)return n.length?n[0]:f.getJSONType(I);if(n.length){if(_.returnTypeNames)return Be(new Set(n));!I||!l(I)||Ke.call(I,"$types")?I={$:I,$types:{$:j}}:I.$types=j}else Q(I)&&Ke.call(I,"$types")&&(I={$:I,$types:!0});return _.returnTypeNames?!1:I}function be(I,n){return ae.apply(this,arguments)}function ae(){return ae=w(regeneratorRuntime.mark(function I(n,e){var t;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(e.map(function(S){return S[1].p}));case 2:return t=a.sent,a.next=5,Promise.all(t.map(function(){var S=w(regeneratorRuntime.mark(function O(k){var N,F,J,G,re,W,H,ce,fe,D,_e,C,T,R;return regeneratorRuntime.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(N=[],F=e.splice(0,1),J=$(F,1),G=J[0],re=$(G,7),W=re[0],H=re[2],ce=re[3],fe=re[4],D=re[5],_e=re[6],C=oe(W,k,H,ce,N,!0,_e),T=m(C,A),!(W&&T)){V.next=11;break}return V.next=8,C.p;case 8:return R=V.sent,fe[D]=R,V.abrupt("return",be(n,N));case 11:return W?fe[D]=C:T?n=C.p:n=C,V.abrupt("return",be(n,N));case 13:case"end":return V.stop()}},O)}));return function(O){return S.apply(this,arguments)}}()));case 5:return a.abrupt("return",n);case 6:case"end":return a.stop()}},I)})),ae.apply(this,arguments)}function te(I,n,e){Object.assign(I,n);var t=et.map(function(i){var a=I[i];return delete I[i],a});e(),et.forEach(function(i,a){I[i]=t[a]})}function oe(I,n,e,t,i,a,S){var O,k={},N=c(n),F=Xe?function(T){var R=S||t.type||f.getJSONType(n);Xe(Object.assign(T||k,{keypath:I,value:n,cyclic:e,stateObj:t,promisesData:i,resolvingTypesonPromise:a,awaitingTypesonPromise:m(n,A)},{type:R}))}:null;if(["string","boolean","number","undefined"].includes(N))return n===void 0||N==="number"&&(isNaN(n)||n===-1/0||n===1/0)?(t.replaced?O=n:O=me(I,n,t,i,!1,a,F),O!==n&&(k={replaced:O})):O=n,F&&F(),O;if(n===null)return F&&F(),n;if(e&&!t.iterateIn&&!t.iterateUnsetNumeric&&n&&c(n)==="object"){var J=Ae.indexOf(n);if(J<0)e===!0&&(Ae.push(n),xe.push(I));else return j[I]="#",F&&F({cyclicKeypath:xe[J]}),"#"+xe[J]}var G=l(n),re=Ie(n),W=(G||re)&&(!q.plainObjectReplacers.length||t.replaced)||t.iterateIn?n:me(I,n,t,i,G||re,null,F),H;if(W!==n?(O=W,k={replaced:W}):I===""&&m(n,A)?(i.push([I,n,e,t,void 0,void 0,t.type]),O=n):re&&t.iterateIn!=="object"||t.iterateIn==="array"?(H=new Array(n.length),k={clone:H}):!["function","symbol"].includes(c(n))&&!("toJSON"in n)&&!m(n,A)&&!m(n,Promise)&&!m(n,ArrayBuffer)||G||t.iterateIn==="object"?(H={},t.addLength&&(H.length=n.length),k={clone:H}):O=n,F&&F(),_.iterateNone)return H||O;if(!H)return O;if(t.iterateIn){var ce=function(R){var L={ownKeys:Ke.call(n,R)};te(t,L,function(){var V=I+(I?".":"")+le(R),Y=oe(V,n[R],Boolean(e),t,i,a);m(Y,A)?i.push([V,Y,Boolean(e),t,H,R,t.type]):Y!==void 0&&(H[R]=Y)})};for(var fe in n)ce(fe);F&&F({endIterateIn:!0,end:!0})}else Re(n).forEach(function(T){var R=I+(I?".":"")+le(T),L={ownKeys:!0};te(t,L,function(){var V=oe(R,n[T],Boolean(e),t,i,a);m(V,A)?i.push([R,V,Boolean(e),t,H,T,t.type]):V!==void 0&&(H[T]=V)})}),F&&F({endIterateOwn:!0,end:!0});if(t.iterateUnsetNumeric){for(var D=n.length,_e=function(R){if(!(R in n)){var L=I+(I?".":"")+R,V={ownKeys:!1};te(t,V,function(){var Y=oe(L,void 0,Boolean(e),t,i,a);m(Y,A)?i.push([L,Y,Boolean(e),t,H,R,t.type]):Y!==void 0&&(H[R]=Y)})}},C=0;C<D;C++)_e(C);F&&F({endIterateUnsetNumeric:!0,end:!0})}return H}function me(I,n,e,t,i,a,S){for(var O=i?q.plainObjectReplacers:q.nonplainObjectReplacers,k=O.length;k--;){var N=O[k];if(N.test(n,e)){var F=N.type;if(q.revivers[F]){var J=j[I];j[I]=J?[F].concat(J):F}if(Object.assign(e,{type:F,replaced:!0}),(Z||!N.replaceAsync)&&!N.replace)return S&&S({typeDetected:!0}),oe(I,n,Ye&&"readonly",e,t,a,F);S&&S({replacing:!0});var G=Z||!N.replaceAsync?"replace":"replaceAsync";return oe(I,N[G](n,e),Ye&&"readonly",e,t,a,F)}}return n}return Fe.length?Z&&_.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(be(Ve,Fe)).then(Qe):!Z&&_.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():_.stringification&&Z?[Qe(Ve)]:Z?Qe(Ve):Promise.resolve(Qe(Ve))}},{key:"encapsulateSync",value:function(b,g,_){return this.encapsulate(b,g,E({throwOnBadSyncType:!0},_,{sync:!0}))}},{key:"encapsulateAsync",value:function(b,g,_){return this.encapsulate(b,g,E({throwOnBadSyncType:!0},_,{sync:!1}))}},{key:"revive",value:function(b,g){var _=b&&b.$types;if(!_)return b;if(_===!0)return b.$;g=E({sync:!0},this.options,{},g);var z=g,Z=z.sync,q=[],j={},Ae=!0;_.$&&l(_.$)&&(b=b.$,_=_.$,Ae=!1);var xe=this;function Fe(ae,te){var oe=xe.revivers[ae]||[],me=$(oe,1),I=me[0];if(!I)throw new Error("Unregistered type: "+ae);return Z&&!("revive"in I)?te:I[Z&&I.revive?"revive":!Z&&I.reviveAsync?"reviveAsync":"revive"](te,j)}function Ye(){var ae=[];if(Object.entries(_).forEach(function(te){var oe=$(te,2),me=oe[0],I=oe[1];I!=="#"&&[].concat(I).forEach(function(n){var e=xe.revivers[n]||[null,{}],t=$(e,2),i=t[1].plain;!i||(ae.push({keypath:me,type:n}),delete _[me])})}),!!ae.length)return ae.sort(U).reduce(function te(oe,me){var I=me.keypath,n=me.type;if(u(oe))return oe.then(function(i){return te(i,{keypath:I,type:n})});var e=ve(b,I);if(e=Fe(n,e),m(e,A))return e.then(function(i){var a=ne(b,I,i);a===i&&(b=a)});var t=ne(b,I,e);t===e&&(b=t)},void 0)}var qe=[];function Xe(ae,te,oe,me,I){if(!(Ae&&ae==="$types")){var n=_[ae],e=Ie(te);if(e||l(te)){var t=e?new Array(te.length):{};for(Re(te).forEach(function(J){var G=Xe(ae+(ae?".":"")+le(J),te[J],oe||t,t,J),re=function(H){return m(H,Oe)?t[J]=void 0:H!==void 0&&(t[J]=H),H};m(G,A)?qe.push(G.then(function(W){return re(W)})):re(G)}),te=t;q.length;){var i=$(q[0],4),a=i[0],S=i[1],O=i[2],k=i[3],N=ve(a,S);if(N!==void 0)O[k]=N;else break;q.splice(0,1)}}if(!n)return te;if(n==="#"){var F=ve(oe,te.slice(1));return F===void 0&&q.push([oe,te.slice(1),me,I]),F}return[].concat(n).reduce(function J(G,re){return m(G,A)?G.then(function(W){return J(W,re)}):Fe(re,G)},te)}}function Ve(ae){return m(ae,Oe)?void 0:ae}var Qe=Ye(),be;return m(Qe,A)?be=Qe.then(function(){return b}):(be=Xe("",b,null),qe.length&&(be=A.resolve(be).then(function(ae){return A.all([ae].concat(qe))}).then(function(ae){var te=$(ae,1),oe=te[0];return oe}))),u(be)?Z&&g.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():m(be,A)?be.p.then(Ve):be:!Z&&g.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Z?Ve(be):Promise.resolve(Ve(be))}},{key:"reviveSync",value:function(b,g){return this.revive(b,E({throwOnBadSyncType:!0},g,{sync:!0}))}},{key:"reviveAsync",value:function(b,g){return this.revive(b,E({throwOnBadSyncType:!0},g,{sync:!1}))}},{key:"register",value:function(b,g){return g=g||{},[].concat(b).forEach(function _(z){var Z=this;if(Ie(z))return z.map(function(q){return _.call(Z,q)});z&&Re(z).forEach(function(q){if(q==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(f.JSON_TYPES.includes(q))throw new TypeError("Plain JSON object types are reserved as type names");var j=z[q],Ae=j&&j.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,xe=Ae.filter(function(oe){return oe.type===q});if(xe.length&&(Ae.splice(Ae.indexOf(xe[0]),1),delete this.revivers[q],delete this.types[q]),typeof j=="function"){var Fe=j;j={test:function(me){return me&&me.constructor===Fe},replace:function(me){return E({},me)},revive:function(me){return Object.assign(Object.create(Fe.prototype),me)}}}else if(Ie(j)){var Ye=j,qe=$(Ye,3),Xe=qe[0],Ve=qe[1],Qe=qe[2];j={test:Xe,replace:Ve,revive:Qe}}if(!(!j||!j.test)){var be={type:q,test:j.test.bind(j)};j.replace&&(be.replace=j.replace.bind(j)),j.replaceAsync&&(be.replaceAsync=j.replaceAsync.bind(j));var ae=typeof g.fallback=="number"?g.fallback:g.fallback?0:1/0;if(j.testPlainObjects?this.plainObjectReplacers.splice(ae,0,be):this.nonplainObjectReplacers.splice(ae,0,be),j.revive||j.reviveAsync){var te={};j.revive&&(te.revive=j.revive.bind(j)),j.reviveAsync&&(te.reviveAsync=j.reviveAsync.bind(j)),this.revivers[q]=[te,{plain:j.testPlainObjects}]}this.types[q]=j}},this)},this),this}}]),f}(),Oe=function f(){p(this,f)};return Oe.__typeson__type__="TypesonUndefined",ie.Undefined=Oe,ie.Promise=A,ie.isThenable=u,ie.toStringTag=r,ie.hasConstructorOf=m,ie.isObject=Q,ie.isPlainObject=l,ie.isUserObject=ee,ie.escapeKeyPathComponent=le,ie.unescapeKeyPathComponent=ye,ie.getByKeyPath=ve,ie.getJSONType=Ue,ie.JSON_TYPES=["null","boolean","number","string","array","object"],ie})}),Xt=Et(function(y,v){(function(c,h){y.exports=h()})(Ot,function(){function c(n){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function h(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function w(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function p(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function x(n){return function(t){if(Array.isArray(t))return P(t)}(n)||function(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}(n)||function(t,i){if(!!t){if(typeof t=="string")return P(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P(t,i)}}(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function P(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function s(n){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function E(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function $(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Be(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function de(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function B(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?de(Object(t),!0).forEach(function(i){Be(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):de(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function M(n,e){return function(i){if(Array.isArray(i))return i}(n)||function(i,a){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(i)))){var S=[],O=!0,k=!1,N=void 0;try{for(var F,J=i[Symbol.iterator]();!(O=(F=J.next()).done)&&(S.push(F.value),!a||S.length!==a);O=!0);}catch(G){k=!0,N=G}finally{try{O||J.return==null||J.return()}finally{if(k)throw N}}return S}}(n,e)||Le(n,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function X(n){return function(t){if(Array.isArray(t))return he(t)}(n)||function(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}(n)||Le(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Le(n,e){if(n){if(typeof n=="string")return he(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?he(n,e):void 0}}function he(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var A=function n(e){E(this,n),this.p=new Promise(e)};A.__typeson__type__="TypesonPromise",typeof Symbol!="undefined"&&(A.prototype[Symbol.toStringTag]="TypesonPromise"),A.prototype.then=function(n,e){var t=this;return new A(function(i,a){t.p.then(function(S){i(n?n(S):S)}).catch(function(S){return e?e(S):Promise.reject(S)}).then(i,a)})},A.prototype.catch=function(n){return this.then(null,n)},A.resolve=function(n){return new A(function(e){e(n)})},A.reject=function(n){return new A(function(e,t){t(n)})},["all","race"].forEach(function(n){A[n]=function(e){return new A(function(t,i){Promise[n](e.map(function(a){return a&&a.constructor&&a.constructor.__typeson__type__==="TypesonPromise"?a.p:a})).then(t,i)})}});var ue={}.toString,K={}.hasOwnProperty,Te=Object.getPrototypeOf,we=K.toString;function Ne(n,e){return l(n)&&typeof n.then=="function"&&(!e||typeof n.catch=="function")}function u(n){return ue.call(n).slice(8,-1)}function r(n,e){if(!n||s(n)!=="object")return!1;var t=Te(n);if(!t)return e===null;var i=K.call(t,"constructor")&&t.constructor;return typeof i!="function"?e===null:e===i||e!==null&&we.call(i)===we.call(e)||typeof e=="function"&&typeof i.__typeson__type__=="string"&&i.__typeson__type__===e.__typeson__type__}function m(n){return!(!n||u(n)!=="Object")&&(!Te(n)||r(n,Object))}function l(n){return n&&s(n)==="object"}function ee(n){return n.replace(/~/g,"~0").replace(/\./g,"~1")}function Q(n){return n.replace(/~1/g,".").replace(/~0/g,"~")}function le(n,e){if(e==="")return n;var t=e.indexOf(".");if(t>-1){var i=n[Q(e.slice(0,t))];return i===void 0?void 0:le(i,e.slice(t+1))}return n[Q(e)]}function ye(n,e,t){if(e==="")return t;var i=e.indexOf(".");return i>-1?ye(n[Q(e.slice(0,i))],e.slice(i+1),t):(n[Q(e)]=t,n)}function ve(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}var ne=Object.keys,Ue=Array.isArray,Re={}.hasOwnProperty,Ie=["type","replaced","iterateIn","iterateUnsetNumeric"];function Ke(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(i){return Promise.reject(i)}}}function et(n,e){if(n.keypath==="")return-1;var t=n.keypath.match(/\./g)||0,i=e.keypath.match(/\./g)||0;return t&&(t=t.length),i&&(i=i.length),t>i?-1:t<i?1:n.keypath<e.keypath?-1:n.keypath>e.keypath}var U=function(){function n(e){E(this,n),this.options=e,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(t,i,a){return i&&$(t.prototype,i),a&&$(t,a),t}(n,[{key:"stringify",value:function(t,i,a,S){S=B(B(B({},this.options),S),{},{stringification:!0});var O=this.encapsulate(t,null,S);return Ue(O)?JSON.stringify(O[0],i,a):O.then(function(k){return JSON.stringify(k,i,a)})}},{key:"stringifySync",value:function(t,i,a,S){return this.stringify(t,i,a,B(B({throwOnBadSyncType:!0},S),{},{sync:!0}))}},{key:"stringifyAsync",value:function(t,i,a,S){return this.stringify(t,i,a,B(B({throwOnBadSyncType:!0},S),{},{sync:!1}))}},{key:"parse",value:function(t,i,a){return a=B(B(B({},this.options),a),{},{parse:!0}),this.revive(JSON.parse(t,i),a)}},{key:"parseSync",value:function(t,i,a){return this.parse(t,i,B(B({throwOnBadSyncType:!0},a),{},{sync:!0}))}},{key:"parseAsync",value:function(t,i,a){return this.parse(t,i,B(B({throwOnBadSyncType:!0},a),{},{sync:!1}))}},{key:"specialTypeNames",value:function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.returnTypeNames=!0,this.encapsulate(t,i,a)}},{key:"rootTypeName",value:function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a.iterateNone=!0,this.encapsulate(t,i,a)}},{key:"encapsulate",value:function(t,i,a){var S=Ke(function(C,T){return ve(Promise.all(T.map(function(R){return R[1].p})),function(R){return ve(Promise.all(R.map(Ke(function(L){var V=!1,Y=[],De=M(T.splice(0,1),1),ge=M(De[0],7),ke=ge[0],Je=ge[2],se=ge[3],Me=ge[4],pe=ge[5],$e=ge[6],Ce=D(ke,L,Je,se,Y,!0,$e),ze=r(Ce,A);return function(bt,pt){var ot=bt();return ot&&ot.then?ot.then(pt):pt(ot)}(function(){if(ke&&ze)return ve(Ce.p,function(He){return Me[pe]=He,V=!0,S(C,Y)})},function(He){return V?He:(ke?Me[pe]=Ce:C=ze?Ce.p:Ce,S(C,Y))})}))),function(){return C})})}),O=(a=B(B({sync:!0},this.options),a)).sync,k=this,N={},F=[],J=[],G=[],re=!("cyclic"in a)||a.cyclic,W=a.encapsulateObserver,H=D("",t,re,i||{},G);function ce(C){var T=Object.values(N);if(a.iterateNone)return T.length?T[0]:n.getJSONType(C);if(T.length){if(a.returnTypeNames)return X(new Set(T));C&&m(C)&&!Re.call(C,"$types")?C.$types=N:C={$:C,$types:{$:N}}}else l(C)&&Re.call(C,"$types")&&(C={$:C,$types:!0});return!a.returnTypeNames&&C}function fe(C,T,R){Object.assign(C,T);var L=Ie.map(function(V){var Y=C[V];return delete C[V],Y});R(),Ie.forEach(function(V,Y){C[V]=L[Y]})}function D(C,T,R,L,V,Y,De){var ge,ke={},Je=s(T),se=W?function(tt){var Pe=De||L.type||n.getJSONType(T);W(Object.assign(tt||ke,{keypath:C,value:T,cyclic:R,stateObj:L,promisesData:V,resolvingTypesonPromise:Y,awaitingTypesonPromise:r(T,A)},{type:Pe}))}:null;if(["string","boolean","number","undefined"].includes(Je))return T===void 0||Number.isNaN(T)||T===Number.NEGATIVE_INFINITY||T===Number.POSITIVE_INFINITY?(ge=L.replaced?T:_e(C,T,L,V,!1,Y,se))!==T&&(ke={replaced:ge}):ge=T,se&&se(),ge;if(T===null)return se&&se(),T;if(R&&!L.iterateIn&&!L.iterateUnsetNumeric&&T&&s(T)==="object"){var Me=F.indexOf(T);if(!(Me<0))return N[C]="#",se&&se({cyclicKeypath:J[Me]}),"#"+J[Me];R===!0&&(F.push(T),J.push(C))}var pe,$e=m(T),Ce=Ue(T),ze=($e||Ce)&&(!k.plainObjectReplacers.length||L.replaced)||L.iterateIn?T:_e(C,T,L,V,$e||Ce,null,se);if(ze!==T?(ge=ze,ke={replaced:ze}):C===""&&r(T,A)?(V.push([C,T,R,L,void 0,void 0,L.type]),ge=T):Ce&&L.iterateIn!=="object"||L.iterateIn==="array"?(pe=new Array(T.length),ke={clone:pe}):(["function","symbol"].includes(s(T))||"toJSON"in T||r(T,A)||r(T,Promise)||r(T,ArrayBuffer))&&!$e&&L.iterateIn!=="object"?ge=T:(pe={},L.addLength&&(pe.length=T.length),ke={clone:pe}),se&&se(),a.iterateNone)return pe||ge;if(!pe)return ge;if(L.iterateIn){var He=function(Pe){var Ze={ownKeys:Re.call(T,Pe)};fe(L,Ze,function(){var at=C+(C?".":"")+ee(Pe),yt=D(at,T[Pe],Boolean(R),L,V,Y);r(yt,A)?V.push([at,yt,Boolean(R),L,pe,Pe,L.type]):yt!==void 0&&(pe[Pe]=yt)})};for(var bt in T)He(bt);se&&se({endIterateIn:!0,end:!0})}else ne(T).forEach(function(tt){var Pe=C+(C?".":"")+ee(tt);fe(L,{ownKeys:!0},function(){var Ze=D(Pe,T[tt],Boolean(R),L,V,Y);r(Ze,A)?V.push([Pe,Ze,Boolean(R),L,pe,tt,L.type]):Ze!==void 0&&(pe[tt]=Ze)})}),se&&se({endIterateOwn:!0,end:!0});if(L.iterateUnsetNumeric){for(var pt=T.length,ot=function(Pe){if(!(Pe in T)){var Ze=C+(C?".":"")+Pe;fe(L,{ownKeys:!1},function(){var at=D(Ze,void 0,Boolean(R),L,V,Y);r(at,A)?V.push([Ze,at,Boolean(R),L,pe,Pe,L.type]):at!==void 0&&(pe[Pe]=at)})}},mt=0;mt<pt;mt++)ot(mt);se&&se({endIterateUnsetNumeric:!0,end:!0})}return pe}function _e(C,T,R,L,V,Y,De){for(var ge=V?k.plainObjectReplacers:k.nonplainObjectReplacers,ke=ge.length;ke--;){var Je=ge[ke];if(Je.test(T,R)){var se=Je.type;if(k.revivers[se]){var Me=N[C];N[C]=Me?[se].concat(Me):se}return Object.assign(R,{type:se,replaced:!0}),!O&&Je.replaceAsync||Je.replace?(De&&De({replacing:!0}),D(C,Je[O||!Je.replaceAsync?"replace":"replaceAsync"](T,R),re&&"readonly",R,L,Y,se)):(De&&De({typeDetected:!0}),D(C,T,re&&"readonly",R,L,Y,se))}}return T}return G.length?O&&a.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(S(H,G)).then(ce):!O&&a.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():a.stringification&&O?[ce(H)]:O?ce(H):Promise.resolve(ce(H))}},{key:"encapsulateSync",value:function(t,i,a){return this.encapsulate(t,i,B(B({throwOnBadSyncType:!0},a),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(t,i,a){return this.encapsulate(t,i,B(B({throwOnBadSyncType:!0},a),{},{sync:!1}))}},{key:"revive",value:function(t,i){var a=t&&t.$types;if(!a)return t;if(a===!0)return t.$;var S=(i=B(B({sync:!0},this.options),i)).sync,O=[],k={},N=!0;a.$&&m(a.$)&&(t=t.$,a=a.$,N=!1);var F=this;function J(ce,fe){var D=M(F.revivers[ce]||[],1)[0];if(!D)throw new Error("Unregistered type: "+ce);return S&&!("revive"in D)?fe:D[S&&D.revive?"revive":!S&&D.reviveAsync?"reviveAsync":"revive"](fe,k)}var G=[];function re(ce){return r(ce,ie)?void 0:ce}var W,H=function(){var fe=[];if(Object.entries(a).forEach(function(D){var _e=M(D,2),C=_e[0],T=_e[1];T!=="#"&&[].concat(T).forEach(function(R){M(F.revivers[R]||[null,{}],2)[1].plain&&(fe.push({keypath:C,type:R}),delete a[C])})}),fe.length)return fe.sort(et).reduce(function D(_e,C){var T=C.keypath,R=C.type;if(Ne(_e))return _e.then(function(Y){return D(Y,{keypath:T,type:R})});var L=le(t,T);if(r(L=J(R,L),A))return L.then(function(Y){var De=ye(t,T,Y);De===Y&&(t=De)});var V=ye(t,T,L);V===L&&(t=V)},void 0)}();return r(H,A)?W=H.then(function(){return t}):(W=function ce(fe,D,_e,C,T){if(!N||fe!=="$types"){var R=a[fe],L=Ue(D);if(L||m(D)){var V=L?new Array(D.length):{};for(ne(D).forEach(function(pe){var $e=ce(fe+(fe?".":"")+ee(pe),D[pe],_e||V,V,pe),Ce=function(He){return r(He,ie)?V[pe]=void 0:He!==void 0&&(V[pe]=He),He};r($e,A)?G.push($e.then(function(ze){return Ce(ze)})):Ce($e)}),D=V;O.length;){var Y=M(O[0],4),De=Y[0],ge=Y[1],ke=Y[2],Je=Y[3],se=le(De,ge);if(se===void 0)break;ke[Je]=se,O.splice(0,1)}}if(!R)return D;if(R==="#"){var Me=le(_e,D.slice(1));return Me===void 0&&O.push([_e,D.slice(1),C,T]),Me}return[].concat(R).reduce(function pe($e,Ce){return r($e,A)?$e.then(function(ze){return pe(ze,Ce)}):J(Ce,$e)},D)}}("",t,null),G.length&&(W=A.resolve(W).then(function(ce){return A.all([ce].concat(G))}).then(function(ce){return M(ce,1)[0]}))),Ne(W)?S&&i.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():r(W,A)?W.p.then(re):W:!S&&i.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():S?re(W):Promise.resolve(re(W))}},{key:"reviveSync",value:function(t,i){return this.revive(t,B(B({throwOnBadSyncType:!0},i),{},{sync:!0}))}},{key:"reviveAsync",value:function(t,i){return this.revive(t,B(B({throwOnBadSyncType:!0},i),{},{sync:!1}))}},{key:"register",value:function(t,i){return i=i||{},[].concat(t).forEach(function a(S){var O=this;if(Ue(S))return S.map(function(k){return a.call(O,k)});S&&ne(S).forEach(function(k){if(k==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(n.JSON_TYPES.includes(k))throw new TypeError("Plain JSON object types are reserved as type names");var N=S[k],F=N&&N.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,J=F.filter(function(fe){return fe.type===k});if(J.length&&(F.splice(F.indexOf(J[0]),1),delete this.revivers[k],delete this.types[k]),typeof N=="function"){var G=N;N={test:function(D){return D&&D.constructor===G},replace:function(D){return B({},D)},revive:function(D){return Object.assign(Object.create(G.prototype),D)}}}else if(Ue(N)){var re=M(N,3);N={test:re[0],replace:re[1],revive:re[2]}}if(N&&N.test){var W={type:k,test:N.test.bind(N)};N.replace&&(W.replace=N.replace.bind(N)),N.replaceAsync&&(W.replaceAsync=N.replaceAsync.bind(N));var H=typeof i.fallback=="number"?i.fallback:i.fallback?0:Number.POSITIVE_INFINITY;if(N.testPlainObjects?this.plainObjectReplacers.splice(H,0,W):this.nonplainObjectReplacers.splice(H,0,W),N.revive||N.reviveAsync){var ce={};N.revive&&(ce.revive=N.revive.bind(N)),N.reviveAsync&&(ce.reviveAsync=N.reviveAsync.bind(N)),this.revivers[k]=[ce,{plain:N.testPlainObjects}]}this.types[k]=N}},this)},this),this}}]),n}(),ie=function n(){E(this,n)};ie.__typeson__type__="TypesonUndefined",U.Undefined=ie,U.Promise=A,U.isThenable=Ne,U.toStringTag=u,U.hasConstructorOf=r,U.isObject=l,U.isPlainObject=m,U.isUserObject=function n(e){if(!e||u(e)!=="Object")return!1;var t=Te(e);return!t||r(e,Object)||n(t)},U.escapeKeyPathComponent=ee,U.unescapeKeyPathComponent=Q,U.getByKeyPath=le,U.getJSONType=function(e){return e===null?"null":Array.isArray(e)?"array":s(e)},U.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Oe={userObject:{test:function(e,t){return U.isUserObject(e)},replace:function(e){return function(i){for(var a=1;a<arguments.length;a++){var S=arguments[a]!=null?arguments[a]:{};a%2?o(Object(S),!0).forEach(function(O){p(i,O,S[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(S)):o(Object(S)).forEach(function(O){Object.defineProperty(i,O,Object.getOwnPropertyDescriptor(S,O))})}return i}({},e)},revive:function(e){return e}}},f=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(e,t){return!!Array.isArray(e)&&(Object.keys(e).some(function(i){return String(Number.parseInt(i))!==i})&&(t.iterateIn="object",t.addLength=!0),!0)},replace:function(e,t){return t.iterateUnsetNumeric=!0,e},revive:function(e){if(Array.isArray(e))return e;var t=[];return Object.keys(e).forEach(function(i){var a=e[i];t[i]=a}),t}}},{sparseUndefined:{test:function(e,t){return e===void 0&&t.ownKeys===!1},replace:function(e){return 0},revive:function(e){}}}],d={undef:{test:function(e,t){return e===void 0&&(t.ownKeys||!("ownKeys"in t))},replace:function(e){return 0},revive:function(e){return new U.Undefined}}},b={StringObject:{test:function(e){return U.toStringTag(e)==="String"&&c(e)==="object"},replace:function(e){return String(e)},revive:function(e){return new String(e)}},BooleanObject:{test:function(e){return U.toStringTag(e)==="Boolean"&&c(e)==="object"},replace:function(e){return Boolean(e)},revive:function(e){return new Boolean(e)}},NumberObject:{test:function(e){return U.toStringTag(e)==="Number"&&c(e)==="object"},replace:function(e){return Number(e)},revive:function(e){return new Number(e)}}},g=[{nan:{test:function(e){return Number.isNaN(e)},replace:function(e){return"NaN"},revive:function(e){return Number.NaN}}},{infinity:{test:function(e){return e===Number.POSITIVE_INFINITY},replace:function(e){return"Infinity"},revive:function(e){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(e){return e===Number.NEGATIVE_INFINITY},replace:function(e){return"-Infinity"},revive:function(e){return Number.NEGATIVE_INFINITY}}}],_={date:{test:function(e){return U.toStringTag(e)==="Date"},replace:function(e){var t=e.getTime();return Number.isNaN(t)?"NaN":t},revive:function(e){return e==="NaN"?new Date(Number.NaN):new Date(e)}}},z={regexp:{test:function(e){return U.toStringTag(e)==="RegExp"},replace:function(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function(e){var t=e.source,i=e.flags;return new RegExp(t,i)}}},Z={map:{test:function(e){return U.toStringTag(e)==="Map"},replace:function(e){return x(e.entries())},revive:function(e){return new Map(e)}}},q={set:{test:function(e){return U.toStringTag(e)==="Set"},replace:function(e){return x(e.values())},revive:function(e){return new Set(e)}}},j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ae=new Uint8Array(256),xe=0;xe<j.length;xe++)Ae[j.charCodeAt(xe)]=xe;var Fe=function(e,t,i){i==null&&(i=e.byteLength);for(var a=new Uint8Array(e,t||0,i),S=a.length,O="",k=0;k<S;k+=3)O+=j[a[k]>>2],O+=j[(3&a[k])<<4|a[k+1]>>4],O+=j[(15&a[k+1])<<2|a[k+2]>>6],O+=j[63&a[k+2]];return S%3==2?O=O.slice(0,-1)+"=":S%3==1&&(O=O.slice(0,-2)+"=="),O},Ye=function(e){var t,i,a,S,O=e.length,k=.75*e.length,N=0;e[e.length-1]==="="&&(k--,e[e.length-2]==="="&&k--);for(var F=new ArrayBuffer(k),J=new Uint8Array(F),G=0;G<O;G+=4)t=Ae[e.charCodeAt(G)],i=Ae[e.charCodeAt(G+1)],a=Ae[e.charCodeAt(G+2)],S=Ae[e.charCodeAt(G+3)],J[N++]=t<<2|i>>4,J[N++]=(15&i)<<4|a>>2,J[N++]=(3&a)<<6|63&S;return F},qe={arraybuffer:{test:function(e){return U.toStringTag(e)==="ArrayBuffer"},replace:function(e,t){t.buffers||(t.buffers=[]);var i=t.buffers.indexOf(e);return i>-1?{index:i}:(t.buffers.push(e),Fe(e))},revive:function(e,t){if(t.buffers||(t.buffers=[]),c(e)==="object")return t.buffers[e.index];var i=Ye(e);return t.buffers.push(i),i}}},Xe=typeof self=="undefined"?Ot:self,Ve={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(n){var e=n,t=Xe[e];t&&(Ve[n.toLowerCase()]={test:function(a){return U.toStringTag(a)===e},replace:function(a,S){var O=a.buffer,k=a.byteOffset,N=a.length;S.buffers||(S.buffers=[]);var F=S.buffers.indexOf(O);return F>-1?{index:F,byteOffset:k,length:N}:(S.buffers.push(O),{encoded:Fe(O),byteOffset:k,length:N})},revive:function(a,S){S.buffers||(S.buffers=[]);var O,k=a.byteOffset,N=a.length,F=a.encoded,J=a.index;return"index"in a?O=S.buffers[J]:(O=Ye(F),S.buffers.push(O)),new t(O,k,N)}})});var Qe={dataview:{test:function(e){return U.toStringTag(e)==="DataView"},replace:function(e,t){var i=e.buffer,a=e.byteOffset,S=e.byteLength;t.buffers||(t.buffers=[]);var O=t.buffers.indexOf(i);return O>-1?{index:O,byteOffset:a,byteLength:S}:(t.buffers.push(i),{encoded:Fe(i),byteOffset:a,byteLength:S})},revive:function(e,t){t.buffers||(t.buffers=[]);var i,a=e.byteOffset,S=e.byteLength,O=e.encoded,k=e.index;return"index"in e?i=t.buffers[k]:(i=Ye(O),t.buffers.push(i)),new DataView(i,a,S)}}},be={IntlCollator:{test:function(e){return U.hasConstructorOf(e,Intl.Collator)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function(e){return U.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function(e){return U.hasConstructorOf(e,Intl.NumberFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.NumberFormat(e.locale,e)}}};function ae(n){for(var e=new Uint8Array(n.length),t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e.buffer}var te={file:{test:function(e){return U.toStringTag(e)==="File"},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),t.status!==200&&t.status!==0)throw new Error("Bad File access: "+t.status);return{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function(e){var t=e.name,i=e.type,a=e.stringContents,S=e.lastModified;return new File([ae(a)],t,{type:i,lastModified:S})},replaceAsync:function(e){return new U.Promise(function(t,i){var a=new FileReader;a.addEventListener("load",function(){t({type:e.type,stringContents:a.result,name:e.name,lastModified:e.lastModified})}),a.addEventListener("error",function(){i(a.error)}),a.readAsBinaryString(e)})}}},oe={bigint:{test:function(e){return typeof e=="bigint"},replace:function(e){return String(e)},revive:function(e){return BigInt(e)}}},me={bigintObject:{test:function(e){return c(e)==="object"&&U.hasConstructorOf(e,BigInt)},replace:function(e){return String(e)},revive:function(e){return new Object(BigInt(e))}}},I={cryptokey:{test:function(e){return U.toStringTag(e)==="CryptoKey"&&e.extractable},replaceAsync:function(e){return new U.Promise(function(t,i){crypto.subtle.exportKey("jwk",e).catch(function(a){i(a)}).then(function(a){t({jwk:a,algorithm:e.algorithm,usages:e.usages})})})},revive:function(e){var t=e.jwk,i=e.algorithm,a=e.usages;return crypto.subtle.importKey("jwk",t,i,!0,a)}}};return[Oe,d,f,b,g,_,z,{imagedata:{test:function(e){return U.toStringTag(e)==="ImageData"},replace:function(e){return{array:x(e.data),width:e.width,height:e.height}},revive:function(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function(e){return U.toStringTag(e)==="ImageBitmap"||e&&e.dataset&&e.dataset.toStringTag==="ImageBitmap"},replace:function(e){var t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),t.toDataURL()},revive:function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),a=document.createElement("img");return a.addEventListener("load",function(){i.drawImage(a,0,0)}),a.src=e,t},reviveAsync:function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),a=document.createElement("img");return a.addEventListener("load",function(){i.drawImage(a,0,0)}),a.src=e,createImageBitmap(t)}}},te,{file:te.file,filelist:{test:function(e){return U.toStringTag(e)==="FileList"},replace:function(e){for(var t=[],i=0;i<e.length;i++)t[i]=e.item(i);return t},revive:function(e){return new(function(){function t(){h(this,t),this._files=arguments[0],this.length=this._files.length}return function(a,S,O){return S&&w(a.prototype,S),O&&w(a,O),a}(t,[{key:"item",value:function(a){return this._files[a]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),t}())(e)}}},{blob:{test:function(e){return U.toStringTag(e)==="Blob"},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),t.status!==200&&t.status!==0)throw new Error("Bad Blob access: "+t.status);return{type:e.type,stringContents:t.responseText}},revive:function(e){var t=e.type,i=e.stringContents;return new Blob([ae(i)],{type:t})},replaceAsync:function(e){return new U.Promise(function(t,i){var a=new FileReader;a.addEventListener("load",function(){t({type:e.type,stringContents:a.result})}),a.addEventListener("error",function(){i(a.error)}),a.readAsBinaryString(e)})}}}].concat(typeof Map=="function"?Z:[],typeof Set=="function"?q:[],typeof ArrayBuffer=="function"?qe:[],typeof Uint8Array=="function"?Ve:[],typeof DataView=="function"?Qe:[],typeof Intl!="undefined"?be:[],typeof crypto!="undefined"?I:[],typeof BigInt!="undefined"?[oe,me]:[])})}),ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lt=new Uint8Array(256);for(var dt=0;dt<ut.length;dt++)lt[ut.codePointAt(dt)]=dt;var At=function(v,c,h){h==null&&(h=v.byteLength);for(var w=new Uint8Array(v,c||0,h),p=w.length,o="",x=0;x<p;x+=3)o+=ut[w[x]>>2],o+=ut[(w[x]&3)<<4|w[x+1]>>4],o+=ut[(w[x+1]&15)<<2|w[x+2]>>6],o+=ut[w[x+2]&63];return p%3===2?o=o.slice(0,-1)+"=":p%3===1&&(o=o.slice(0,-2)+"=="),o},Lt=function(v){var c=v.length,h=v.length*.75,w=0,p,o,x,P;v[v.length-1]==="="&&(h--,v[v.length-2]==="="&&h--);for(var s=new ArrayBuffer(h),E=new Uint8Array(s),$=0;$<c;$+=4)p=lt[v.codePointAt($)],o=lt[v.codePointAt($+1)],x=lt[v.codePointAt($+2)],P=lt[v.codePointAt($+3)],E[w++]=p<<2|o>>4,E[w++]=(o&15)<<4|x>>2,E[w++]=(x&3)<<6|P&63;return s},Zt=typeof self=="undefined"?global:self,Ut={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(y){var v=y,c=Zt[v];c&&(Ut[y.toLowerCase()+"2"]={test:function(h){return vt.toStringTag(h)===v},replace:function(h){var w=h.buffer,p=h.byteOffset,o=h.length;return{buffer:w,byteOffset:p,length:o}},revive:function(h){var w=h.buffer,p=h.byteOffset,o=h.length;return new c(w,p,o)}})});var en={arraybuffer:{test:function(y){return vt.toStringTag(y)==="ArrayBuffer"},replace:function(y){return At(y,0,y.byteLength)},revive:function(y){var v=Lt(y);return v}}},Ge=new vt().register(Xt),tn="FileReaderSync"in self,ht=[],Tt=0;Ge.register([en,Ut,{blob2:{test:function(y){return vt.toStringTag(y)==="Blob"},replace:function(y){if(y.isClosed)throw new Error("The Blob is closed");if(tn){var v=jt(y,"binary"),c=At(v,0,v.byteLength);return{type:y.type,data:c}}else{ht.push(y);var h={type:y.type,data:{start:Tt,end:Tt+y.size}};return Tt+=y.size,h}},finalize:function(y,v){y.data=At(v,0,v.byteLength)},revive:function(y){var v=y.type,c=y.data;return new Blob([Lt(c)],{type:v})}}}]);Ge.mustFinalize=function(){return ht.length>0};Ge.finalize=function(y){return it(void 0,void 0,void 0,function(){var v,c,h,w,p,o,x,P,s,E;return We(this,function($){switch($.label){case 0:return[4,kt(new Blob(ht),"binary")];case 1:if(v=$.sent(),y){for(c=0,h=y;c<h.length;c++)if(w=h[c],w.$types){p=w.$types,o=p.$,o&&(p=p.$);for(x in p)P=p[x],s=Ge.types[P],s&&s.finalize&&(E=je.getByKeyPath(w,o?"$."+x:x),s.finalize(E,v.slice(E.start,E.end)))}}return ht=[],[2]}})})};var nn=2e3;function rn(y,v){return it(this,void 0,void 0,function(){function c(){return it(this,void 0,void 0,function(){var s,E,$,Be,de,B,M,X,Le;return We(this,function(he){switch(he.label){case 0:return[4,Promise.all(y.tables.map(function(A){return A.count()}))];case 1:s=he.sent(),s.forEach(function(A,ue){return w[ue].rowCount=A}),P.totalRows=s.reduce(function(A,ue){return A+ue}),E=JSON.stringify(o,void 0,p?2:void 0),$=E.lastIndexOf("]"),Be=E.substring(0,$),h.push(Be),de=v.filter,B=function(A){var ue,K,Te,we,Ne,u,r,m,l,ee,Q,le;return We(this,function(ye){switch(ye.label){case 0:ue=y.table(A),K=ue.schema.primKey,Te=!!K.keyPath,we=v.numRowsPerChunk||nn,Ne=Te?{tableName:ue.name,inbound:!0,rows:[]}:{tableName:ue.name,inbound:!1,rows:[]},u=JSON.stringify(Ne,void 0,p?2:void 0),p&&(u=u.split(`
`).join(`
    `)),r=u.lastIndexOf("]"),h.push(u.substring(0,r)),m=null,l=0,ee=!0,Q=function(){var ve,ne,Ue,Re,U,Ie,Ke,et,U;return We(this,function(ie){switch(ie.label){case 0:return x&&je.ignoreTransaction(function(){return x(P)}),ve=m==null?ue.limit(we):ue.where(":id").above(m).limit(we),[4,ve.toArray()];case 1:return ne=ie.sent(),ne.length===0?[2,"break"]:(m!=null&&l>0&&(h.push(","),p&&h.push(`
      `)),ee=ne.length===we,Te?(Ue=de?ne.filter(function(Oe){return de(A,Oe)}):ne,Re=Ue.map(function(Oe){return Ge.encapsulate(Oe)}),Ge.mustFinalize()?[4,je.waitFor(Ge.finalize(Re))]:[3,3]):[3,4]);case 2:ie.sent(),ie.label=3;case 3:return U=JSON.stringify(Re,void 0,p?2:void 0),p&&(U=U.split(`
`).join(`
      `)),h.push(new Blob([U.substring(1,U.length-1)])),l=Ue.length,m=ne.length>0?je.getByKeyPath(ne[ne.length-1],K.keyPath):null,[3,8];case 4:return[4,ve.primaryKeys()];case 5:return Ie=ie.sent(),Ke=Ie.map(function(Oe,f){return[Oe,ne[f]]}),de&&(Ke=Ke.filter(function(Oe){var f=Oe[0],d=Oe[1];return de(A,d,f)})),et=Ke.map(function(Oe){return Ge.encapsulate(Oe)}),Ge.mustFinalize()?[4,je.waitFor(Ge.finalize(et))]:[3,7];case 6:ie.sent(),ie.label=7;case 7:U=JSON.stringify(et,void 0,p?2:void 0),p&&(U=U.split(`
`).join(`
      `)),h.push(new Blob([U.substring(1,U.length-1)])),l=Ke.length,m=Ie.length>0?Ie[Ie.length-1]:null,ie.label=8;case 8:return P.completedRows+=ne.length,[2]}})},ye.label=1;case 1:return ee?[5,Q()]:[3,3];case 2:return le=ye.sent(),le==="break"?[3,3]:[3,1];case 3:return h.push(u.substr(r)),P.completedTables+=1,P.completedTables<P.totalTables&&h.push(","),[2]}})},M=0,X=w,he.label=2;case 2:return M<X.length?(Le=X[M].name,[5,B(Le)]):[3,5];case 3:he.sent(),he.label=4;case 4:return M++,[3,2];case 5:return h.push(E.substr($)),P.done=!0,x&&je.ignoreTransaction(function(){return x(P)}),[2]}})})}var h,w,p,o,x,P;return We(this,function(s){switch(s.label){case 0:v=v||{},h=[],w=y.tables.map(function(E){return{name:E.name,schema:Ht(E),rowCount:0}}),p=v.prettyJson,o={formatName:"dexie",formatVersion:1,data:{databaseName:y.name,databaseVersion:y.verno,tables:w,data:[]}},x=v.progressCallback,P={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:y.tables.length},s.label=1;case 1:return s.trys.push([1,,6,7]),v.noTransaction?[4,c()]:[3,3];case 2:return s.sent(),[3,5];case 3:return[4,y.transaction("r",y.tables,c)];case 4:s.sent(),s.label=5;case 5:return[3,7];case 6:return Ge.finalize(),[7];case 7:return[2,new Blob(h,{type:"text/json"})]}})})}var an=1,on={Stream:function(){}},sn=Et(function(y,v){(function(c){var h=typeof process=="object"&&process.env?process.env:self;c.parser=function(u){return new de(u)},c.CParser=de,c.CStream=M,c.createStream=B,c.MAX_BUFFER_LENGTH=10*1024*1024,c.DEBUG=h.CDEBUG==="debug",c.INFO=h.CDEBUG==="debug"||h.CDEBUG==="info",c.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var w={textNode:void 0,numberNode:""},p=c.EVENTS.filter(function(u){return u!=="error"&&u!=="end"}),o=0,x;c.STATE={BEGIN:o++,VALUE:o++,OPEN_OBJECT:o++,CLOSE_OBJECT:o++,OPEN_ARRAY:o++,CLOSE_ARRAY:o++,TEXT_ESCAPE:o++,STRING:o++,BACKSLASH:o++,END:o++,OPEN_KEY:o++,CLOSE_KEY:o++,TRUE:o++,TRUE2:o++,TRUE3:o++,FALSE:o++,FALSE2:o++,FALSE3:o++,FALSE4:o++,NULL:o++,NULL2:o++,NULL3:o++,NUMBER_DECIMAL_POINT:o++,NUMBER_DIGIT:o++};for(var P in c.STATE)c.STATE[c.STATE[P]]=P;o=c.STATE;const s={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(u){function r(){this.__proto__=u}return r.prototype=u,new r}),Object.getPrototypeOf||(Object.getPrototypeOf=function(u){return u.__proto__}),Object.keys||(Object.keys=function(u){var r=[];for(var m in u)u.hasOwnProperty(m)&&r.push(m);return r});function E(u){var r=Math.max(c.MAX_BUFFER_LENGTH,10),m=0;for(var l in w){var ee=u[l]===void 0?0:u[l].length;if(ee>r)switch(l){case"text":closeText(u);break;default:K(u,"Max buffer length exceeded: "+l)}m=Math.max(m,ee)}u.bufferCheckPosition=c.MAX_BUFFER_LENGTH-m+u.position}function $(u){for(var r in w)u[r]=w[r]}var Be=/[\\"\n]/g;function de(u){if(!(this instanceof de))return new de(u);var r=this;$(r),r.bufferCheckPosition=c.MAX_BUFFER_LENGTH,r.q=r.c=r.p="",r.opt=u||{},r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.state=o.BEGIN,r.stack=new Array,r.position=r.column=0,r.line=1,r.slashed=!1,r.unicodeI=0,r.unicodeS=null,r.depth=0,X(r,"onready")}de.prototype={end:function(){Te(this)},write:Ne,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{x=on.Stream}catch{x=function(){}}function B(u){return new M(u)}function M(u){if(!(this instanceof M))return new M(u);this._parser=new de(u),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var r=this;x.apply(r),this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(m){r.emit("error",m),r._parser.error=null},p.forEach(function(m){Object.defineProperty(r,"on"+m,{get:function(){return r._parser["on"+m]},set:function(l){if(!l)return r.removeAllListeners(m),r._parser["on"+m]=l,l;r.on(m,l)},enumerable:!0,configurable:!1})})}M.prototype=Object.create(x.prototype,{constructor:{value:M}}),M.prototype.write=function(u){u=new Buffer(u);for(var r=0;r<u.length;r++){var m=u[r];if(this.bytes_remaining>0){for(var l=0;l<this.bytes_remaining;l++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+l]=u[l];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,r=r+l-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&m>=128)if(m>=194&&m<=223&&(this.bytes_in_sequence=2),m>=224&&m<=239&&(this.bytes_in_sequence=3),m>=240&&m<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>u.length){for(var ee=0;ee<=u.length-1-r;ee++)this.temp_buffs[this.bytes_in_sequence][ee]=u[r+ee];return this.bytes_remaining=r+this.bytes_in_sequence-u.length,!0}else{this.string=u.slice(r,r+this.bytes_in_sequence).toString(),r=r+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var Q=r;Q<u.length&&!(u[Q]>=128);Q++);this.string=u.slice(r,Q).toString(),this._parser.write(this.string),this.emit("data",this.string),r=Q-1}},M.prototype.end=function(u){return u&&u.length&&this._parser.write(u.toString()),this._parser.end(),!0},M.prototype.on=function(u,r){var m=this;return!m._parser["on"+u]&&p.indexOf(u)!==-1&&(m._parser["on"+u]=function(){var l=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);l.splice(0,0,u),m.emit.apply(m,l)}),x.prototype.on.call(m,u,r)},M.prototype.destroy=function(){$(this._parser),this.emit("close")};function X(u,r,m){c.INFO&&console.log("-- emit",r,m),u[r]&&u[r](m)}function Le(u,r,m){he(u),X(u,r,m)}function he(u,r){u.textNode=ue(u.opt,u.textNode),u.textNode!==void 0&&X(u,r||"onvalue",u.textNode),u.textNode=void 0}function A(u){u.numberNode&&X(u,"onvalue",parseFloat(u.numberNode)),u.numberNode=""}function ue(u,r){return r===void 0||(u.trim&&(r=r.trim()),u.normalize&&(r=r.replace(/\s+/g," "))),r}function K(u,r){return he(u),r+=`
Line: `+u.line+`
Column: `+u.column+`
Char: `+u.c,r=new Error(r),u.error=r,X(u,"onerror",r),u}function Te(u){return(u.state!==o.VALUE||u.depth!==0)&&K(u,"Unexpected end"),he(u),u.c="",u.closed=!0,X(u,"onend"),de.call(u,u.opt),u}function we(u){return u===s.carriageReturn||u===s.lineFeed||u===s.space||u===s.tab}function Ne(u){var r=this;if(this.error)throw this.error;if(r.closed)return K(r,"Cannot write after close. Assign an onready handler.");if(u===null)return Te(r);var m=0,l=u.charCodeAt(0),ee=r.p;for(c.DEBUG&&console.log("write -> ["+u+"]");l&&(ee=l,r.c=l=u.charCodeAt(m++),ee!==l?r.p=ee:ee=r.p,!!l);)switch(c.DEBUG&&console.log(m,l,c.STATE[r.state]),r.position++,l===s.lineFeed?(r.line++,r.column=0):r.column++,r.state){case o.BEGIN:l===s.openBrace?r.state=o.OPEN_OBJECT:l===s.openBracket?r.state=o.OPEN_ARRAY:we(l)||K(r,"Non-whitespace before {[.");continue;case o.OPEN_KEY:case o.OPEN_OBJECT:if(we(l))continue;if(r.state===o.OPEN_KEY)r.stack.push(o.CLOSE_KEY);else if(l===s.closeBrace){X(r,"onopenobject"),this.depth++,X(r,"oncloseobject"),this.depth--,r.state=r.stack.pop()||o.VALUE;continue}else r.stack.push(o.CLOSE_OBJECT);l===s.doubleQuote?r.state=o.STRING:K(r,'Malformed object key should start with "');continue;case o.CLOSE_KEY:case o.CLOSE_OBJECT:if(we(l))continue;r.state,o.CLOSE_KEY,l===s.colon?(r.state===o.CLOSE_OBJECT?(r.stack.push(o.CLOSE_OBJECT),he(r,"onopenobject"),this.depth++):he(r,"onkey"),r.state=o.VALUE):l===s.closeBrace?(Le(r,"oncloseobject"),this.depth--,r.state=r.stack.pop()||o.VALUE):l===s.comma?(r.state===o.CLOSE_OBJECT&&r.stack.push(o.CLOSE_OBJECT),he(r),r.state=o.OPEN_KEY):K(r,"Bad object");continue;case o.OPEN_ARRAY:case o.VALUE:if(we(l))continue;if(r.state===o.OPEN_ARRAY)if(X(r,"onopenarray"),this.depth++,r.state=o.VALUE,l===s.closeBracket){X(r,"onclosearray"),this.depth--,r.state=r.stack.pop()||o.VALUE;continue}else r.stack.push(o.CLOSE_ARRAY);l===s.doubleQuote?r.state=o.STRING:l===s.openBrace?r.state=o.OPEN_OBJECT:l===s.openBracket?r.state=o.OPEN_ARRAY:l===s.t?r.state=o.TRUE:l===s.f?r.state=o.FALSE:l===s.n?r.state=o.NULL:l===s.minus?r.numberNode+="-":s._0<=l&&l<=s._9?(r.numberNode+=String.fromCharCode(l),r.state=o.NUMBER_DIGIT):K(r,"Bad value");continue;case o.CLOSE_ARRAY:if(l===s.comma)r.stack.push(o.CLOSE_ARRAY),he(r,"onvalue"),r.state=o.VALUE;else if(l===s.closeBracket)Le(r,"onclosearray"),this.depth--,r.state=r.stack.pop()||o.VALUE;else{if(we(l))continue;K(r,"Bad array")}continue;case o.STRING:r.textNode===void 0&&(r.textNode="");var Q=m-1,le=r.slashed,ye=r.unicodeI;e:for(;;){for(c.DEBUG&&console.log(m,l,c.STATE[r.state],le);ye>0;)if(r.unicodeS+=String.fromCharCode(l),l=u.charCodeAt(m++),r.position++,ye===4?(r.textNode+=String.fromCharCode(parseInt(r.unicodeS,16)),ye=0,Q=m-1):ye++,!l)break e;if(l===s.doubleQuote&&!le){r.state=r.stack.pop()||o.VALUE,r.textNode+=u.substring(Q,m-1),r.position+=m-1-Q;break}if(l===s.backslash&&!le&&(le=!0,r.textNode+=u.substring(Q,m-1),r.position+=m-1-Q,l=u.charCodeAt(m++),r.position++,!l))break;if(le){if(le=!1,l===s.n?r.textNode+=`
`:l===s.r?r.textNode+="\r":l===s.t?r.textNode+="	":l===s.f?r.textNode+="\f":l===s.b?r.textNode+="\b":l===s.u?(ye=1,r.unicodeS=""):r.textNode+=String.fromCharCode(l),l=u.charCodeAt(m++),r.position++,Q=m-1,l)continue;break}Be.lastIndex=m;var ve=Be.exec(u);if(ve===null){m=u.length+1,r.textNode+=u.substring(Q,m-1),r.position+=m-1-Q;break}if(m=ve.index+1,l=u.charCodeAt(ve.index),!l){r.textNode+=u.substring(Q,m-1),r.position+=m-1-Q;break}}r.slashed=le,r.unicodeI=ye;continue;case o.TRUE:l===s.r?r.state=o.TRUE2:K(r,"Invalid true started with t"+l);continue;case o.TRUE2:l===s.u?r.state=o.TRUE3:K(r,"Invalid true started with tr"+l);continue;case o.TRUE3:l===s.e?(X(r,"onvalue",!0),r.state=r.stack.pop()||o.VALUE):K(r,"Invalid true started with tru"+l);continue;case o.FALSE:l===s.a?r.state=o.FALSE2:K(r,"Invalid false started with f"+l);continue;case o.FALSE2:l===s.l?r.state=o.FALSE3:K(r,"Invalid false started with fa"+l);continue;case o.FALSE3:l===s.s?r.state=o.FALSE4:K(r,"Invalid false started with fal"+l);continue;case o.FALSE4:l===s.e?(X(r,"onvalue",!1),r.state=r.stack.pop()||o.VALUE):K(r,"Invalid false started with fals"+l);continue;case o.NULL:l===s.u?r.state=o.NULL2:K(r,"Invalid null started with n"+l);continue;case o.NULL2:l===s.l?r.state=o.NULL3:K(r,"Invalid null started with nu"+l);continue;case o.NULL3:l===s.l?(X(r,"onvalue",null),r.state=r.stack.pop()||o.VALUE):K(r,"Invalid null started with nul"+l);continue;case o.NUMBER_DECIMAL_POINT:l===s.period?(r.numberNode+=".",r.state=o.NUMBER_DIGIT):K(r,"Leading zero not followed by .");continue;case o.NUMBER_DIGIT:s._0<=l&&l<=s._9?r.numberNode+=String.fromCharCode(l):l===s.period?(r.numberNode.indexOf(".")!==-1&&K(r,"Invalid number has two dots"),r.numberNode+="."):l===s.e||l===s.E?((r.numberNode.indexOf("e")!==-1||r.numberNode.indexOf("E")!==-1)&&K(r,"Invalid number has two exponential"),r.numberNode+="e"):l===s.plus||l===s.minus?(ee===s.e||ee===s.E||K(r,"Invalid symbol in number"),r.numberNode+=String.fromCharCode(l)):(A(r),m--,r.state=r.stack.pop()||o.VALUE);continue;default:K(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&E(r),r}})(v)});function un(y){var v=0,c=cn(!0),h={pullAsync:function(w){return it(this,void 0,void 0,function(){var p,o,x;return We(this,function(P){switch(P.label){case 0:return p=y.slice(v,v+w),v+=w,[4,kt(p,"text")];case 1:return o=P.sent(),x=c.write(o),h.result=x||{},[2,x]}})})},pullSync:function(w){var p=y.slice(v,v+w);v+=w;var o=jt(p,"text"),x=c.write(o);return h.result=x||{},x},done:function(){return c.done()},eof:function(){return v>=y.size},result:{}};return h}function cn(y){var v=sn.parser(),c=0,h,w=[],p,o,x=!1,P=!1;return v.onopenobject=function(s){var E={};E.incomplete=!0,h||(h=E),p&&(w.push([o,p,P]),y&&(P?p.push(E):p[o]=E)),p=E,o=s,P=!1,++c},v.onkey=function(s){return o=s},v.onvalue=function(s){return P?p.push(s):p[o]=s},v.oncloseobject=function(){var s;if(delete p.incomplete,o=null,--c===0)x=!0;else{var E=p;s=w.pop(),o=s[0],p=s[1],P=s[2],y||(P?p.push(E):p[o]=E)}},v.onopenarray=function(){var s=[];s.incomplete=!0,h||(h=s),p&&(w.push([o,p,P]),y&&(P?p.push(s):p[o]=s)),p=s,P=!0,o=null,++c},v.onclosearray=function(){var s;if(delete p.incomplete,o=null,--c===0)x=!0;else{var E=p;s=w.pop(),o=s[0],p=s[1],P=s[2],y||(P?p.push(E):p[o]=E)}},{write:function(s){return v.write(s),h},done:function(){return x}}}var Rt=1024;function fn(y,v){return it(this,void 0,void 0,function(){var c,h,w,p;return We(this,function(o){switch(o.label){case 0:return v=v||{},c=v.chunkSizeBytes||Rt*1024,[4,Vt(y,c)];case 1:return h=o.sent(),w=h.result.data,p=new je(w.databaseName),p.version(w.databaseVersion).stores(Wt(w)),[4,Ft(p,h,v)];case 2:return o.sent(),[2,p]}})})}function Ft(y,v,c){return it(this,void 0,void 0,function(){function h(){return it(this,void 0,void 0,function(){var B,M,X,Le,he;return We(this,function(A){switch(A.label){case 0:B=function(ue){var K,Te,we,Ne,u,r,m,l,ee,Q,le,ye;return We(this,function(ve){switch(ve.label){case 0:if(!ue.rows)return[2,"break"];if(!ue.rows.incomplete&&ue.rows.length===0)return[2,"continue"];if(s&&je.ignoreTransaction(function(){return s(E)}),K=ue.tableName,Te=y.table(K),we=P.tables.filter(function(ne){return ne.name===K})[0].schema,!Te){if(c.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(ue.tableName," is missing in installed database"))}if(!c.acceptChangedPrimaryKey&&we.split(",")[0]!=Te.schema.primKey.src)throw new Error("Primary key differs for table ".concat(ue.tableName,". "));for(Ne=ue.rows,u=[],r=0;r<Ne.length&&(m=Ne[r],!m.incomplete);r++)u.push(Ge.revive(m));return l=c.filter,ee=l?ue.inbound?u.filter(function(ne){return l(K,ne)}):u.filter(function(ne){var Ue=ne[0],Re=ne[1];return l(K,Re,Ue)}):u,Q=ue.inbound?[void 0,ee]:[ee.map(function(ne){return ne[0]}),u.map(function(ne){return ne[1]})],le=Q[0],ye=Q[1],c.overwriteValues?[4,Te.bulkPut(ye,le)]:[3,2];case 1:return ve.sent(),[3,4];case 2:return[4,Te.bulkAdd(ye,le)];case 3:ve.sent(),ve.label=4;case 4:return E.completedRows+=u.length,u.incomplete||(E.completedTables+=1),Ne.splice(0,u.length),[2]}})},M=0,X=P.data,A.label=1;case 1:return M<X.length?(Le=X[M],[5,B(Le)]):[3,4];case 2:if(he=A.sent(),he==="break")return[3,4];A.label=3;case 3:return M++,[3,1];case 4:for(;P.data.length>0&&P.data[0].rows&&!P.data[0].rows.incomplete;)P.data.splice(0,1);return!p.done()&&!p.eof()?x?(p.pullSync(w),[3,7]):[3,5]:[3,8];case 5:return[4,je.waitFor(p.pullAsync(w))];case 6:A.sent(),A.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var w,p,o,x,P,s,E,$,Be,de;return We(this,function(B){switch(B.label){case 0:return c=c||{},w=c.chunkSizeBytes||Rt*1024,[4,Vt(v,w)];case 1:if(p=B.sent(),o=p.result,x="FileReaderSync"in self,P=o.data,!c.acceptNameDiff&&y.name!==P.databaseName)throw new Error("Name differs. Current database name is ".concat(y.name," but export is ").concat(P.databaseName));if(!c.acceptVersionDiff&&y.verno!==P.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(y.verno," but export is ").concat(P.databaseVersion));if(s=c.progressCallback,E={done:!1,completedRows:0,completedTables:0,totalRows:P.tables.reduce(function(M,X){return M+X.rowCount},0),totalTables:P.tables.length},s&&je.ignoreTransaction(function(){return s(E)}),!c.clearTablesBeforeImport)return[3,5];$=0,Be=y.tables,B.label=2;case 2:return $<Be.length?(de=Be[$],[4,de.clear()]):[3,5];case 3:B.sent(),B.label=4;case 4:return $++,[3,2];case 5:return c.noTransaction?[4,h()]:[3,7];case 6:return B.sent(),[3,9];case 7:return[4,y.transaction("rw",y.tables,h)];case 8:B.sent(),B.label=9;case 9:return E.done=!0,s&&je.ignoreTransaction(function(){return s(E)}),[2]}})})}function Vt(y,v){return it(this,void 0,void 0,function(){var c,h;return We(this,function(w){switch(w.label){case 0:c="slice"in y?un(y):y,w.label=1;case 1:return c.eof()?[3,3]:[4,c.pullAsync(v)];case 2:return w.sent(),c.result.data&&c.result.data.data?[3,3]:[3,1];case 3:if(h=c.result,!h||h.formatName!="dexie")throw new Error("Given file is not a dexie export");if(h.formatVersion>an)throw new Error("Format version ".concat(h.formatVersion," not supported"));if(!h.data)throw new Error("No data in export file");if(!h.data.databaseName)throw new Error("Missing databaseName in export file");if(!h.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!h.data.tables)throw new Error("Missing tables in export file");return[2,c]}})})}je.prototype.export=function(y){return rn(this,y)};je.prototype.import=function(y,v){return Ft(this,y,v)};je.import=function(y,v){return fn(y,v)};var Pt;(function(y){y.Documents="DOCUMENTS",y.Data="DATA",y.Library="LIBRARY",y.Cache="CACHE",y.External="EXTERNAL",y.ExternalStorage="EXTERNAL_STORAGE"})(Pt||(Pt={}));var _t;(function(y){y.UTF8="utf8",y.ASCII="ascii",y.UTF16="utf16"})(_t||(_t={}));const ln=It("Filesystem",{web:()=>Dt(()=>import("./web.a0fe190c.js"),["assets/web.a0fe190c.js","assets/index.dc551ac6.js","assets/index.f1323390.css"]).then(y=>new y.FilesystemWeb)}),nt=It("FilePicker");async function pn(y){const v=await xt.export();dn(v,y)}async function yn(y){const v=await hn(y);await xt.import(v,{overwriteValues:!0,clearTablesBeforeImport:!0,acceptVersionDiff:!0})}async function dn(y,v){const c=await y.text();rt.is.mobile&&nt.createFile({path:v,fileName:`RefuelTrackerBackup_${zt()}.json`,mimeType:"*/*",data:c})}async function hn(y){if(rt.is.mobile){const v=await ln.readFile({path:y,encoding:_t.UTF8});return new Blob([v.data],{type:"application/json"})}return Promise.resolve(new Blob)}const vn={class:"q-pa-md q-gutter-md"},xn=$t({__name:"Settings",setup(y){let v,c;const h=Qt(),w=[{label:"Space Station",value:1},{label:"Dark",value:2},{label:"Light",value:3},{label:"High Contrast",value:4},{label:"Red Green Weakness",value:5}],p=wt(h.selectedColorThemeId),o=wt(h.plateNumberInTitleActive),x=wt(h.autoBackupActive);function P(B){h.changeColorTheme(B)}function s(B){h.togglePlateNumberInTitle(B)}async function E(B){B&&rt.is.mobile&&await nt.openDocumentTree(),h.toggleAutoBackup(B)}async function $(){rt.is.mobile&&await nt.openDocumentTree()}async function Be(){c=B=>{(async()=>(h.setAutoBackupPath(B.path),await pn(B.path),Ct.create("Backup exported")))()},rt.is.mobile&&await nt.openDocumentTree()}async function de(){v=B=>{(async()=>(await yn(B.path),Ct.create("Backup imported")))()},rt.is.mobile&&await nt.getContent({mimeType:"*/*"})}return Kt(()=>{qt.emit("updateTitle","Settings"),rt.is.mobile&&(nt.addListener("getContentResult",B=>{v(B)}),nt.addListener("openDocumentTreeResult",B=>{c(B)}))}),Jt(()=>{rt.is.mobile&&nt.removeAllListeners()}),(B,M)=>(Mt(),Gt("div",vn,[Se(St,null,{default:Ee(()=>[Nt("",!0),Se(ct,{header:""},{default:Ee(()=>[ft("Settings")]),_:1}),Se(St,{class:"q-pb-md"},{default:Ee(()=>[Se(gt,{tag:"label"},{default:Ee(()=>[Se(st,null,{default:Ee(()=>[Se(ct,null,{default:Ee(()=>[ft("Show number plate title")]),_:1})]),_:1}),Se(st,{avatar:""},{default:Ee(()=>[Se(Yt,{modelValue:o.value,"onUpdate:modelValue":[M[1]||(M[1]=X=>o.value=X),s],color:"positive"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Se(ct,{header:""},{default:Ee(()=>[ft("Backup")]),_:1}),Se(St,{class:"q-pb-md"},{default:Ee(()=>[Nt("",!0),Se(gt,{tag:"label"},{default:Ee(()=>[Se(st,null,{default:Ee(()=>[Se(ct,null,{default:Ee(()=>[ft("Export")]),_:1})]),_:1}),Se(st,{avatar:""},{default:Ee(()=>[Se(Bt,{label:"Export",color:"positive",onClick:Be})]),_:1})]),_:1}),Se(gt,{tag:"label"},{default:Ee(()=>[Se(st,null,{default:Ee(()=>[Se(ct,null,{default:Ee(()=>[ft("Import")]),_:1})]),_:1}),Se(st,{avatar:""},{default:Ee(()=>[Se(Bt,{label:"Import",color:"positive",onClick:de})]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{xn as default};
