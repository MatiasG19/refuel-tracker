import{P as v,Q as n,a5 as m,d as l,U as p,aq as x,ar as C,a9 as a,$ as r,a4 as _,bi as D,aa as g,a1 as S,c as k,o as y,a as $,S as f,X as Q,a6 as b,F as q}from"./index.dc551ac6.js";import{Q as B}from"./QPage.e64a8461.js";import{a as U}from"./dexie.8617b804.js";import{emitter as u}from"./mitt.4e333a4b.js";import{o as N}from"./index.8776d51a.js";import{c as O}from"./index.356d1b45.js";import{u as A}from"./settingsStore.6d20ebcd.js";import{u as E}from"./QSpace.09ccd3fc.js";import"./ClosePopup.606a8f34.js";import"./i18n.2b9c7e98.js";import"./fuelConsumption.d2d2c6e8.js";const F={class:"row items-center no-wrap"},M={class:"col"},P={class:"text-subtitle2"},R={class:"col-auto space-station"},z={class:"text-h4 accent-space-station"},I={class:"text-subtitle1"},L=v({__name:"VehicleCard",props:{vehicle:{type:U,required:!0}},setup(s){return(o,e)=>(n(),m("div",null,[l(x,{class:"space-station"},{default:p(()=>[l(C,null,{default:p(()=>{var c;return[a("div",F,[a("div",M,[a("div",P,r(s.vehicle.fuelConsumption)+" "+r((c=s.vehicle.fuelUnit)==null?void 0:c.fuelConsumptionUnit),1)]),a("div",R,[l(_,{dense:"",round:"",flat:"",icon:"more_vert",onClick:e[0]||(e[0]=D(d=>g(u).emit("showVehicleOptionsDialog",s.vehicle.id),["stop"]))})])]),a("div",z,r(s.vehicle.name),1),a("div",I,r(s.vehicle.plateNumber),1)]}),_:1})]),_:1})]))}}),T={key:0,class:"absolute-center items-center"},X={class:"row"},ie=v({__name:"Vehicles",setup(s){const o=S(),e=E(),c=A(),d=k(()=>e.vehicles?e.getAllVehicleData():[]);u.on("showVehicleOptionsDialog",t=>N([{text:"Show refuels",icon:"local_gas_station",action:()=>{(async()=>{const i=await e.getVehicle(t);await c.changeSelectedVehicle({...i}),o.push("/refuels")})()}},{text:"Edit",icon:"edit",action:()=>{o.push({path:`/vehicles/edit/${t}`,params:{id:t}})}},{text:"Delete",icon:"delete",action:()=>O("Delete vehicle?",i=>{(async()=>await e.deleteVehicle(i).then(async()=>await e.readVehicles()))()},t)}]));async function V(t){await c.changeSelectedVehicle({...t}),await o.push("/")}return y(async()=>{u.emit("updateTitle","Vehicles"),await e.readVehicles()}),$(()=>{u.off("showVehicleOptionsDialog")}),(t,i)=>(n(),f(B,null,{default:p(()=>[d.value.length===0?(n(),m("div",T,[a("div",X,[l(Q,{class:"col",name:"img:directions_car.svg",size:"100px"})]),l(_,{color:"accent",label:"Add vehicle","icon-right":"add",unelevated:"","no-caps":"",outline:"",onClick:i[0]||(i[0]=h=>g(o).push("/vehicles/add"))})])):(n(!0),m(q,{key:1},b(d.value,(h,w)=>(n(),f(L,{key:w,vehicle:h,class:"q-pt-md q-pl-md q-pr-md",onClick:j=>V(h)},null,8,["vehicle","onClick"]))),128))]),_:1}))}});export{ie as default};
