import{d as g,a1 as n,ac as m,f as l,a3 as p,aw as x,ax as D,ag as a,a8 as r,ab as _,b4 as y,ah as w,a9 as k,c as S,o as $,a as b,a2 as v,a5 as Q,ad as q,F as B}from"./index.af9e0f6e.js";import{Q as N}from"./QPage.e5be6806.js";import{a as O}from"./dexie.e9b82229.js";import{emitter as d}from"./mitt.4e333a4b.js";import{o as U}from"./index.bf534033.js";import{c as A}from"./index.6063ef0a.js";import{u as E}from"./settingsStore.5309004a.js";import{u as F}from"./refuelStore.e71e446b.js";import{u as M}from"./use-quasar.3f07aff8.js";import"./QSpace.2d3c42d6.js";import"./ClosePopup.15002a59.js";import"./i18n.a8414de4.js";import"./fuelConsumption.8f4bd1ed.js";const R={class:"row items-center no-wrap"},z={class:"col"},I={class:"text-subtitle2"},L={class:"col-auto space-station"},P={class:"text-h4 accent-space-station"},T={class:"text-subtitle1"},j=g({__name:"VehicleCard",props:{vehicle:{type:O,required:!0}},setup(s){return(o,e)=>(n(),m("div",null,[l(x,{class:"space-station"},{default:p(()=>[l(D,null,{default:p(()=>{var c;return[a("div",R,[a("div",z,[a("div",I,r(s.vehicle.fuelConsumption)+" "+r((c=s.vehicle.fuelUnit)==null?void 0:c.fuelConsumptionUnit),1)]),a("div",L,[l(_,{dense:"",round:"",flat:"",icon:"more_vert",onClick:e[0]||(e[0]=y(u=>w(d).emit("showVehicleOptionsDialog",s.vehicle.id),["stop"]))})])]),a("div",P,r(s.vehicle.name),1),a("div",T,r(s.vehicle.plateNumber),1)]}),_:1})]),_:1})]))}}),G={key:0,class:"absolute-center items-center"},H={class:"row"},le=g({__name:"Vehicles",setup(s){const o=k(),e=F(),c=E(),u=M(),f=S(()=>e.vehicles?e.getAllVehicleData():[]);d.on("showVehicleOptionsDialog",t=>U([{text:"Show refuels",icon:"local_gas_station",action:()=>{(async()=>{const i=await e.getVehicle(t);await c.changeSelectedVehicle({...i}),o.push("/refuels")})()}},{text:"Edit",icon:"edit",action:()=>{o.push({path:`/vehicles/edit/${t}`,params:{id:t}})}},{text:"Delete",icon:"delete",action:()=>A("Delete vehicle?",i=>{u.loading.show({delay:400,spinnerColor:"accent",messageColor:"accent",message:"Deleting vehicle"}),(async()=>await e.deleteVehicle(i).then(async()=>await e.readVehicles()))(),u.loading.hide()},t)}]));async function V(t){await c.changeSelectedVehicle({...t}),await o.push("/")}return $(async()=>{d.emit("updateTitle","Vehicles"),await e.readVehicles()}),b(()=>{d.off("showVehicleOptionsDialog")}),(t,i)=>(n(),v(N,null,{default:p(()=>[f.value.length===0?(n(),m("div",G,[a("div",H,[l(Q,{class:"col",name:"img:directions_car.svg",size:"100px"})]),l(_,{color:"accent",label:"Add vehicle","icon-right":"add",unelevated:"","no-caps":"",outline:"",onClick:i[0]||(i[0]=h=>w(o).push("/vehicles/add"))})])):(n(!0),m(B,{key:1},q(f.value,(h,C)=>(n(),v(j,{key:C,vehicle:h,class:"q-pt-md q-pl-md q-pr-md",onClick:J=>V(h)},null,8,["vehicle","onClick"]))),128))]),_:1}))}});export{le as default};
