import{_ as U,P as h,a1 as y,r as p,o as g,Q as w,a5 as C,d as a,U as N,aa as i,a9 as S,a4 as f}from"./index.dc551ac6.js";import{u as F,Q}from"./QSpace.09ccd3fc.js";import{Q as q,r,m as x}from"./index.935bf3a0.js";import{_ as s}from"./CInput.13e1ce53.js";import{_ as I}from"./CSelect.241b4b25.js";import{emitter as v}from"./mitt.4e333a4b.js";import{u as B}from"./settingsStore.6d20ebcd.js";import{V as E}from"./dexie.8617b804.js";import"./i18n.2b9c7e98.js";import"./fuelConsumption.d2d2c6e8.js";import"./QSelect.e1eefabe.js";import"./QItem.7b9df1e0.js";import"./QMenu.b4d70c81.js";import"./selection.badb18f8.js";import"./use-virtual-scroll.ff57756e.js";import"./format.c860d4da.js";const R={class:"row"},$=h({__name:"VehicleForm",props:{id:{type:Number}},setup(V){const n=V,m=y(),u=F(),b=B(),l=p(new E),d=p([]);let o="";async function _(){o.includes("/add")?await u.addVehicle({...l.value}):o.includes("/edit")&&(await b.changeSelectedVehicle({...l.value}),await u.updateVehicle({...l.value})),m.push("/vehicles")}return g(async()=>{if(n.id){const e=await u.getVehicle(n.id);e?(l.value.id=e.id,l.value.name=e.name,l.value.plateNumber=e.plateNumber,l.value.fuelUnitId=e.fuelUnitId,l.value.currencyUnit=e.currencyUnit):console.error("Vehicle not found!")}(await u.getFuelUnits()).forEach(e=>d.value.push({label:e.fuelConsumptionUnit,value:e.id})),o=m.currentRoute.value.path.toLocaleLowerCase(),o.includes("/add")?v.emit("updateTitle","Add vehicle"):o.includes("/edit")&&v.emit("updateTitle","Edit vehicle")}),(c,e)=>(w(),C("div",null,[a(q,{onSubmit:_,class:"q-pa-md q-gutter-md"},{default:N(()=>[a(s,{modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.name=t),label:"Vehicle name",rules:[i(r),i(x)],autofocus:""},null,8,["modelValue","rules"]),a(s,{modelValue:l.value.plateNumber,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.plateNumber=t),label:"Number plate",rules:[i(r)]},null,8,["modelValue","rules"]),a(I,{outlined:"",class:"q-pb-md",modelValue:l.value.fuelUnitId,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.fuelUnitId=t),options:d.value,label:"Fuel unit"},null,8,["modelValue","options"]),a(s,{class:"q-pb-md",modelValue:l.value.currencyUnit,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.currencyUnit=t),label:"Currency unit",rules:[i(r)]},null,8,["modelValue","rules"]),S("div",R,[a(f,{color:"negative",label:"Cancel","no-caps":"",class:"btn",onClick:e[4]||(e[4]=t=>c.$router.go(-1))}),a(Q),a(f,{color:"positive",label:"Confirm",type:"submit","no-caps":"",class:"btn"})])]),_:1})]))}});var Y=U($,[["__scopeId","data-v-1718bfc8"]]);export{Y as default};
