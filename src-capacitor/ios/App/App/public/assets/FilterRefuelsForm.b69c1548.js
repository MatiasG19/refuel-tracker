import{Q as d,c}from"./QPopupProxy.4b8cadc1.js";import{d as C,a9 as Q,c as f,aB as S,o as U,a1 as V,ac as h,f as o,a3 as a,ah as p,ag as n,M as D,ab as r}from"./index.af9e0f6e.js";import{Q as B}from"./QSpace.2d3c42d6.js";import{Q as g,_ as M,r as v}from"./index.2761fcb4.js";import{C as F}from"./ClosePopup.15002a59.js";import{d as i}from"./date.a0df01d2.js";import{emitter as x}from"./mitt.4e333a4b.js";import{u as y}from"./refuelFilterStore.f430f297.js";import"./use-cache.b0833c75.js";import"./format.c860d4da.js";import"./QMenu.8ec9ede0.js";import"./selection.bf6e3a61.js";import"./dexie.e9b82229.js";const H={class:"row items-center"},R={class:"row items-center"},k={class:"row"},O=C({__name:"FilterRefuelsForm",setup(q){const Y=Q(),s=y(),u=f(()=>i.formatDate(s.dateFrom,"YYYY/MM/DD")),m=f(()=>i.formatDate(s.dateUntil,"YYYY/MM/DD"));function _(e){let t=new Date(e);t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),s.dateFrom=t}function b(e){let t=new Date(e);t.setHours(23),t.setMinutes(59),t.setSeconds(59),t.setMilliseconds(999),s.dateUntil=t}function w(){s.setFilter(),Y.push("/refuels")}return S(()=>{if(s.filterActive==!1){s.filterName=i.formatDate(s.dateFrom,"YYYY/MM/DD")+" - "+i.formatDate(s.dateUntil,"YYYY/MM/DD");let e=new Date;e.setDate(e.getDate()-30),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),s.dateFrom=e,e=new Date,e.setHours(23),e.setMinutes(59),e.setSeconds(59),e.setMilliseconds(999),s.dateUntil=e}}),U(()=>{x.emit("updateTitle","Filter refuels")}),(e,t)=>(V(),h("div",null,[o(g,{onSubmit:w,class:"q-px-md q-gutter-md"},{default:a(()=>[o(M,{color:"accent",value:u.value,label:"Filter from",rules:[p(v)]},{default:a(()=>[o(d,{"transition-show":"scale","transition-hide":"scale"},{default:a(()=>[o(c,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=l=>_(l))},null,8,["modelValue"]),n("div",H,[D(o(r,{label:"Close",color:"primary",flat:""},null,512),[[F]])])]),_:1})]),_:1},8,["value","rules"]),o(M,{color:"accent",value:m.value,label:"Filter until",rules:[p(v)]},{default:a(()=>[o(d,{"transition-show":"scale","transition-hide":"scale"},{default:a(()=>[o(c,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=l=>b(l))},null,8,["modelValue"]),n("div",R,[D(o(r,{label:"Close",color:"primary",flat:""},null,512),[[F]])])]),_:1})]),_:1},8,["value","rules"]),n("div",k,[o(r,{color:"negative",label:"Cancel","no-caps":"",class:"form-btn",onClick:t[2]||(t[2]=l=>e.$router.push("/refuels"))}),o(B),o(r,{color:"positive",label:"Filter",type:"submit","no-caps":"",class:"form-btn"})])]),_:1})]))}});export{O as default};
