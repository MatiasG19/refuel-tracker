import{j as fe,b4 as me,b5 as pe,b6 as Xe,b7 as Je,x as wt,b8 as xt,z as qt,b9 as At,c as i,E as _t,g as Ge,h as v,X as ue,ba as Ft,R as Ot,af as M,aL as Lt,r as x,bb as Bt,bc as Ne,w as te,bd as G,p as T,be as Dt,bf as Pt,m as Ht,am as ve,bg as Tt,an as U,ae as Mt,bh as Rt,az as Kt,J as Et}from"./index.dc551ac6.js";import{Q as $t,a as zt,b as Qt}from"./QItem.7b9df1e0.js";import{Q as Nt}from"./QMenu.b4d70c81.js";import{u as jt,a as Ut}from"./use-virtual-scroll.ff57756e.js";import{n as je}from"./format.c860d4da.js";var pt=fe({name:"QField",inheritAttrs:!1,props:me,emits:pe,setup(){return Xe(Je())}});const Xt={xs:8,sm:10,md:14,lg:20,xl:24};var Jt=fe({name:"QChip",props:{...wt,...xt,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:b,emit:o}){const{proxy:{$q:A}}=Ge(),B=qt(e,A),c=At(e,Xt),w=i(()=>e.selected===!0||e.icon!==void 0),f=i(()=>e.selected===!0?e.iconSelected||A.iconSet.chip.selected:e.icon),h=i(()=>e.iconRemove||A.iconSet.chip.remove),_=i(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),F=i(()=>{const s=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(s?` text-${s} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(_.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(B.value===!0?" q-chip--dark q-dark":"")}),V=i(()=>{const s=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},R={...s,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||A.lang.label.remove};return{chip:s,remove:R}});function p(s){s.keyCode===13&&C(s)}function C(s){e.disable||(o("update:selected",!e.selected),o("click",s))}function D(s){(s.keyCode===void 0||s.keyCode===13)&&(M(s),e.disable===!1&&(o("update:modelValue",!1),o("remove")))}function I(){const s=[];_.value===!0&&s.push(v("div",{class:"q-focus-helper"})),w.value===!0&&s.push(v(ue,{class:"q-chip__icon q-chip__icon--left",name:f.value}));const R=e.label!==void 0?[v("div",{class:"ellipsis"},[e.label])]:void 0;return s.push(v("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Ft(b.default,R))),e.iconRight&&s.push(v(ue,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&s.push(v(ue,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value,...V.value.remove,onClick:D,onKeyup:D})),s}return()=>{if(e.modelValue===!1)return;const s={class:F.value,style:c.value};return _.value===!0&&Object.assign(s,V.value.chip,{onClick:C,onKeyup:p}),_t("div",s,I(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Ot,e.ripple]])}}});const Ue=e=>["add","add-unique","toggle"].includes(e),Gt=".*+?^${}()|[]\\",Wt=Object.keys(me);var lu=fe({name:"QSelect",inheritAttrs:!1,props:{...jt,...Lt,...me,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Ue},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...pe,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:b,emit:o}){const{proxy:A}=Ge(),{$q:B}=A,c=x(!1),w=x(!1),f=x(-1),h=x(""),_=x(!1),F=x(!1);let V=null,p,C,D,I=null,s,R,O,ge;const We=x(null),y=x(null),K=x(null),le=x(null),he=x(null),be=Bt(e),ye=Tt(Ke),L=i(()=>Array.isArray(e.options)?e.options.length:0),Ye=i(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Ze,virtualScrollSliceSizeComputed:Se,localResetVirtualScroll:ne,padVirtualScroll:et,onVirtualScrollEvt:Ce,scrollTo:Ve,setVirtualScrollSize:ke}=Ut({virtualScrollLength:L,getVirtualScrollTarget:dt,getVirtualScrollEl:Me,virtualScrollItemSizeComputed:Ye}),n=Je(),g=i(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,l=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const u=e.mapOptions===!0&&p!==void 0?p:[],a=l.map(d=>st(d,u));return e.modelValue===null&&t===!0?a.filter(d=>d!==null):a}return l}),tt=i(()=>{const t={};return Wt.forEach(l=>{const u=e[l];u!==void 0&&(t[l]=u)}),t}),W=i(()=>e.optionsDark===null?n.isDark.value:e.optionsDark),ae=i(()=>Ne(g.value)),ut=i(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||g.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),Ie=i(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),X=i(()=>L.value===0),we=i(()=>g.value.map(t=>k.value(t)).join(", ")),xe=i(()=>e.displayValue!==void 0?e.displayValue:we.value),ie=i(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),lt=i(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||g.value.some(ie.value))),qe=i(()=>n.focused.value===!0?e.tabindex:-1),Ae=i(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":c.value===!0?"true":"false","aria-controls":`${n.targetUid.value}_lb`};return f.value>=0&&(t["aria-activedescendant"]=`${n.targetUid.value}_${f.value}`),t}),_e=i(()=>({id:`${n.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Fe=i(()=>g.value.map((t,l)=>({index:l,opt:t,html:ie.value(t),selected:!0,removeAtIndex:ct,toggleOption:P,tabindex:qe.value}))),nt=i(()=>{if(L.value===0)return[];const{from:t,to:l}=Ze.value;return e.options.slice(t,l).map((u,a)=>{const d=E.value(u)===!0,r=t+a,m={clickable:!0,active:!1,activeClass:ot.value,manualFocus:!0,focused:!1,disable:d,tabindex:-1,dense:e.optionsDense,dark:W.value,role:"option",id:`${n.targetUid.value}_${r}`,onClick:()=>{P(u)}};return d!==!0&&(ce(u)===!0&&(m.active=!0),f.value===r&&(m.focused=!0),m["aria-selected"]=m.active===!0?"true":"false",B.platform.is.desktop===!0&&(m.onMousemove=()=>{c.value===!0&&$(r)})),{index:r,opt:u,html:ie.value(u),label:k.value(u),selected:m.active,focused:m.focused,toggleOption:P,setOptionIndex:$,itemProps:m}})}),at=i(()=>e.dropdownIcon!==void 0?e.dropdownIcon:B.iconSet.arrow.dropdown),it=i(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),ot=i(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),q=i(()=>re(e.optionValue,"value")),k=i(()=>re(e.optionLabel,"label")),E=i(()=>re(e.optionDisable,"disable")),Y=i(()=>g.value.map(t=>q.value(t))),rt=i(()=>{const t={onInput:Ke,onChange:ye,onKeydown:Te,onKeyup:Pe,onKeypress:He,onFocus:Be,onClick(l){C===!0&&U(l)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ye,t});te(g,t=>{p=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&n.innerLoading.value!==!0&&(w.value!==!0&&c.value!==!0||ae.value!==!0)&&(D!==!0&&j(),(w.value===!0||c.value===!0)&&z(""))},{immediate:!0}),te(()=>e.fillInput,j),te(c,se),te(L,It);function Oe(t){return e.emitValue===!0?q.value(t):t}function oe(t){if(t>-1&&t<g.value.length)if(e.multiple===!0){const l=e.modelValue.slice();o("remove",{index:t,value:l.splice(t,1)[0]}),o("update:modelValue",l)}else o("update:modelValue",null)}function ct(t){oe(t),n.focus()}function Le(t,l){const u=Oe(t);if(e.multiple!==!0){e.fillInput===!0&&J(k.value(t),!0,!0),o("update:modelValue",u);return}if(g.value.length===0){o("add",{index:0,value:u}),o("update:modelValue",e.multiple===!0?[u]:u);return}if(l===!0&&ce(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const a=e.modelValue.slice();o("add",{index:a.length,value:u}),a.push(u),o("update:modelValue",a)}function P(t,l){if(n.editable.value!==!0||t===void 0||E.value(t)===!0)return;const u=q.value(t);if(e.multiple!==!0){l!==!0&&(J(e.fillInput===!0?k.value(t):"",!0,!0),H()),y.value!==null&&y.value.focus(),(g.value.length===0||G(q.value(g.value[0]),u)!==!0)&&o("update:modelValue",e.emitValue===!0?u:t);return}if((C!==!0||_.value===!0)&&n.focus(),Be(),g.value.length===0){const r=e.emitValue===!0?u:t;o("add",{index:0,value:r}),o("update:modelValue",e.multiple===!0?[r]:r);return}const a=e.modelValue.slice(),d=Y.value.findIndex(r=>G(r,u));if(d>-1)o("remove",{index:d,value:a.splice(d,1)[0]});else{if(e.maxValues!==void 0&&a.length>=e.maxValues)return;const r=e.emitValue===!0?u:t;o("add",{index:a.length,value:r}),a.push(r)}o("update:modelValue",a)}function $(t){if(B.platform.is.desktop!==!0)return;const l=t>-1&&t<L.value?t:-1;f.value!==l&&(f.value=l)}function Z(t=1,l){if(c.value===!0){let u=f.value;do u=je(u+t,-1,L.value-1);while(u!==-1&&u!==f.value&&E.value(e.options[u])===!0);f.value!==u&&($(u),Ve(u),l!==!0&&e.useInput===!0&&e.fillInput===!0&&ee(u>=0?k.value(e.options[u]):s))}}function st(t,l){const u=a=>G(q.value(a),t);return e.options.find(u)||l.find(u)||t}function re(t,l){const u=t!==void 0?t:l;return typeof u=="function"?u:a=>a!==null&&typeof a=="object"&&u in a?a[u]:a}function ce(t){const l=q.value(t);return Y.value.find(u=>G(u,l))!==void 0}function Be(t){e.useInput===!0&&y.value!==null&&(t===void 0||y.value===t.target&&t.target.value===we.value)&&y.value.select()}function De(t){Mt(t,27)===!0&&c.value===!0&&(U(t),H(),j()),o("keyup",t)}function Pe(t){const{value:l}=t.target;if(t.keyCode!==void 0){De(t);return}if(t.target.value="",V!==null&&(clearTimeout(V),V=null),j(),typeof l=="string"&&l.length!==0){const u=l.toLocaleLowerCase(),a=r=>{const m=e.options.find(S=>r.value(S).toLocaleLowerCase()===u);return m===void 0?!1:(g.value.indexOf(m)===-1?P(m):H(),!0)},d=r=>{a(q)!==!0&&(a(k)===!0||r===!0||z(l,!0,()=>d(!0)))};d()}else n.clearValue(t)}function He(t){o("keypress",t)}function Te(t){if(o("keydown",t),Rt(t)===!0)return;const l=h.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),u=t.shiftKey!==!0&&e.multiple!==!0&&(f.value>-1||l===!0);if(t.keyCode===27){ve(t);return}if(t.keyCode===9&&u===!1){Q();return}if(t.target===void 0||t.target.id!==n.targetUid.value||n.editable.value!==!0)return;if(t.keyCode===40&&n.innerLoading.value!==!0&&c.value===!1){M(t),N();return}if(t.keyCode===8&&e.hideSelected!==!0&&h.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?oe(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&o("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof h.value!="string"||h.value.length===0)&&(M(t),f.value=-1,Z(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&Se.value!==void 0&&(M(t),f.value=Math.max(-1,Math.min(L.value,f.value+(t.keyCode===33?-1:1)*Se.value.view)),Z(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(M(t),Z(t.keyCode===38?-1:1,e.multiple));const a=L.value;if((O===void 0||ge<Date.now())&&(O=""),a>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||O.length!==0)){c.value!==!0&&N(t);const d=t.key.toLocaleLowerCase(),r=O.length===1&&O[0]===d;ge=Date.now()+1500,r===!1&&(M(t),O+=d);const m=new RegExp("^"+O.split("").map(de=>Gt.indexOf(de)>-1?"\\"+de:de).join(".*"),"i");let S=f.value;if(r===!0||S<0||m.test(k.value(e.options[S]))!==!0)do S=je(S+1,-1,a-1);while(S!==f.value&&(E.value(e.options[S])===!0||m.test(k.value(e.options[S]))!==!0));f.value!==S&&T(()=>{$(S),Ve(S),S>=0&&e.useInput===!0&&e.fillInput===!0&&ee(k.value(e.options[S]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||O!=="")&&(t.keyCode!==9||u===!1))){if(t.keyCode!==9&&M(t),f.value>-1&&f.value<a){P(e.options[f.value]);return}if(l===!0){const d=(r,m)=>{if(m){if(Ue(m)!==!0)return}else m=e.newValueMode;if(J("",e.multiple!==!0,!0),r==null)return;(m==="toggle"?P:Le)(r,m==="add-unique"),e.multiple!==!0&&(y.value!==null&&y.value.focus(),H())};if(e.onNewValue!==void 0?o("newValue",h.value,d):d(h.value),e.multiple!==!0)return}c.value===!0?Q():n.innerLoading.value!==!0&&N()}}function Me(){return C===!0?he.value:K.value!==null&&K.value.contentEl!==null?K.value.contentEl:void 0}function dt(){return Me()}function vt(){return e.hideSelected===!0?[]:b["selected-item"]!==void 0?Fe.value.map(t=>b["selected-item"](t)).slice():b.selected!==void 0?[].concat(b.selected()):e.useChips===!0?Fe.value.map((t,l)=>v(Jt,{key:"option-"+l,removable:n.editable.value===!0&&E.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:qe.value,onRemove(){t.removeAtIndex(l)}},()=>v("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:k.value(t.opt)}))):[v("span",{[lt.value===!0?"innerHTML":"textContent"]:xe.value})]}function Re(){if(X.value===!0)return b["no-option"]!==void 0?b["no-option"]({inputValue:h.value}):void 0;const t=b.option!==void 0?b.option:u=>v(Qt,{key:u.index,...u.itemProps},()=>v($t,()=>v(zt,()=>v("span",{[u.html===!0?"innerHTML":"textContent"]:u.label}))));let l=et("div",nt.value.map(t));return b["before-options"]!==void 0&&(l=b["before-options"]().concat(l)),Et(b["after-options"],l)}function ft(t,l){const u=l===!0?{...Ae.value,...n.splitAttrs.attributes.value}:void 0,a={ref:l===!0?y:void 0,key:"i_t",class:ut.value,style:e.inputStyle,value:h.value!==void 0?h.value:"",type:"search",...u,id:l===!0?n.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...rt.value};return t!==!0&&C===!0&&(Array.isArray(a.class)===!0?a.class=[...a.class,"no-pointer-events"]:a.class+=" no-pointer-events"),v("input",a)}function Ke(t){V!==null&&(clearTimeout(V),V=null),!(t&&t.target&&t.target.qComposing===!0)&&(ee(t.target.value||""),D=!0,s=h.value,n.focused.value!==!0&&(C!==!0||_.value===!0)&&n.focus(),e.onFilter!==void 0&&(V=setTimeout(()=>{V=null,z(h.value)},e.inputDebounce)))}function ee(t){h.value!==t&&(h.value=t,o("inputValue",t))}function J(t,l,u){D=u!==!0,e.useInput===!0&&(ee(t),(l===!0||u!==!0)&&(s=t),l!==!0&&z(t))}function z(t,l,u){if(e.onFilter===void 0||l!==!0&&n.focused.value!==!0)return;n.innerLoading.value===!0?o("filterAbort"):(n.innerLoading.value=!0,F.value=!0),t!==""&&e.multiple!==!0&&g.value.length!==0&&D!==!0&&t===k.value(g.value[0])&&(t="");const a=setTimeout(()=>{c.value===!0&&(c.value=!1)},10);I!==null&&clearTimeout(I),I=a,o("filter",t,(d,r)=>{(l===!0||n.focused.value===!0)&&I===a&&(clearTimeout(I),typeof d=="function"&&d(),F.value=!1,T(()=>{n.innerLoading.value=!1,n.editable.value===!0&&(l===!0?c.value===!0&&H():c.value===!0?se(!0):c.value=!0),typeof r=="function"&&T(()=>{r(A)}),typeof u=="function"&&T(()=>{u(A)})}))},()=>{n.focused.value===!0&&I===a&&(clearTimeout(I),n.innerLoading.value=!1,F.value=!1),c.value===!0&&(c.value=!1)})}function mt(){return v(Nt,{ref:K,class:Ie.value,style:e.popupContentStyle,modelValue:c.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&X.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:W.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:it.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,..._e.value,onScrollPassive:Ce,onBeforeShow:$e,onBeforeHide:gt,onShow:ht},Re)}function gt(t){ze(t),Q()}function ht(){ke()}function bt(t){U(t),y.value!==null&&y.value.focus(),_.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function yt(t){U(t),T(()=>{_.value=!1})}function St(){const t=[v(pt,{class:`col-auto ${n.fieldClass.value}`,...tt.value,for:n.targetUid.value,dark:W.value,square:!0,loading:F.value,itemAligned:!1,filled:!0,stackLabel:h.value.length!==0,...n.splitAttrs.listeners.value,onFocus:bt,onBlur:yt},{...b,rawControl:()=>n.getControl(!0),before:void 0,after:void 0})];return c.value===!0&&t.push(v("div",{ref:he,class:Ie.value+" scroll",style:e.popupContentStyle,..._e.value,onClick:ve,onScrollPassive:Ce},Re())),v(Kt,{ref:le,modelValue:w.value,position:e.useInput===!0?"top":void 0,transitionShow:R,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:$e,onBeforeHide:Ct,onHide:Vt,onShow:kt},()=>v("div",{class:"q-select__dialog"+(W.value===!0?" q-select__dialog--dark q-dark":"")+(_.value===!0?" q-select__dialog--focused":"")},t))}function Ct(t){ze(t),le.value!==null&&le.value.__updateRefocusTarget(n.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),n.focused.value=!1}function Vt(t){H(),n.focused.value===!1&&o("blur",t),j()}function kt(){const t=document.activeElement;(t===null||t.id!==n.targetUid.value)&&y.value!==null&&y.value!==t&&y.value.focus(),ke()}function Q(){w.value!==!0&&(f.value=-1,c.value===!0&&(c.value=!1),n.focused.value===!1&&(I!==null&&(clearTimeout(I),I=null),n.innerLoading.value===!0&&(o("filterAbort"),n.innerLoading.value=!1,F.value=!1)))}function N(t){n.editable.value===!0&&(C===!0?(n.onControlFocusin(t),w.value=!0,T(()=>{n.focus()})):n.focus(),e.onFilter!==void 0?z(h.value):(X.value!==!0||b["no-option"]!==void 0)&&(c.value=!0))}function H(){w.value=!1,Q()}function j(){e.useInput===!0&&J(e.multiple!==!0&&e.fillInput===!0&&g.value.length!==0&&k.value(g.value[0])||"",!0,!0)}function se(t){let l=-1;if(t===!0){if(g.value.length!==0){const u=q.value(g.value[0]);l=e.options.findIndex(a=>G(q.value(a),u))}ne(l)}$(l)}function It(t,l){c.value===!0&&n.innerLoading.value===!1&&(ne(-1,!0),T(()=>{c.value===!0&&n.innerLoading.value===!1&&(t>l?ne():se(!0))}))}function Ee(){w.value===!1&&K.value!==null&&K.value.updatePosition()}function $e(t){t!==void 0&&U(t),o("popupShow",t),n.hasPopupOpen=!0,n.onControlFocusin(t)}function ze(t){t!==void 0&&U(t),o("popupHide",t),n.hasPopupOpen=!1,n.onControlFocusout(t)}function Qe(){C=B.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?b["no-option"]!==void 0||e.onFilter!==void 0||X.value===!1:!0),R=B.platform.is.ios===!0&&C===!0&&e.useInput===!0?"fade":e.transitionShow}return Dt(Qe),Pt(Ee),Qe(),Ht(()=>{V!==null&&clearTimeout(V)}),Object.assign(A,{showPopup:N,hidePopup:H,removeAtIndex:oe,add:Le,toggleOption:P,getOptionIndex:()=>f.value,setOptionIndex:$,moveOptionSelection:Z,filter:z,updateMenuPosition:Ee,updateInputValue:J,isOptionSelected:ce,getEmittingOptionValue:Oe,isOptionDisabled:(...t)=>E.value.apply(null,t)===!0,getOptionValue:(...t)=>q.value.apply(null,t),getOptionLabel:(...t)=>k.value.apply(null,t)}),Object.assign(n,{innerValue:g,fieldClass:i(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:We,targetRef:y,hasValue:ae,showPopup:N,floatingLabel:i(()=>e.hideSelected!==!0&&ae.value===!0||typeof h.value=="number"||h.value.length!==0||Ne(e.displayValue)),getControlChild:()=>{if(n.editable.value!==!1&&(w.value===!0||X.value!==!0||b["no-option"]!==void 0))return C===!0?St():mt();n.hasPopupOpen===!0&&(n.hasPopupOpen=!1)},controlEvents:{onFocusin(t){n.onControlFocusin(t)},onFocusout(t){n.onControlFocusout(t,()=>{j(),Q()})},onClick(t){if(ve(t),C!==!0&&c.value===!0){Q(),y.value!==null&&y.value.focus();return}N(t)}},getControl:t=>{const l=vt(),u=t===!0||w.value!==!0||C!==!0;if(e.useInput===!0)l.push(ft(t,u));else if(n.editable.value===!0){const d=u===!0?Ae.value:void 0;l.push(v("input",{ref:u===!0?y:void 0,key:"d_t",class:"q-select__focus-target",id:u===!0?n.targetUid.value:void 0,value:xe.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...d,onKeydown:Te,onKeyup:De,onKeypress:He})),u===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&l.push(v("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Pe}))}if(be.value!==void 0&&e.disable!==!0&&Y.value.length!==0){const d=Y.value.map(r=>v("option",{value:r,selected:!0}));l.push(v("select",{class:"hidden",name:be.value,multiple:e.multiple},d))}const a=e.useInput===!0||u!==!0?void 0:n.splitAttrs.attributes.value;return v("div",{class:"q-field__native row items-center",...a,...n.splitAttrs.listeners.value},l)},getInnerAppend:()=>e.loading!==!0&&F.value!==!0&&e.hideDropdownIcon!==!0?[v(ue,{class:"q-select__dropdown-icon"+(c.value===!0?" rotate-180":""),name:at.value})]:null}),Xe(n)}});export{lu as Q};
