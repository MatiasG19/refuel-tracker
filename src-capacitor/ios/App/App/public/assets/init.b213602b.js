import{u as f}from"./settingsStore.5309004a.js";import{d as c}from"./dexie.e9b82229.js";import{u as m}from"./refuelFilterStore.f430f297.js";import{v as g,F as u}from"./fuelConsumption.8f4bd1ed.js";import{G as d,a as i}from"./GraphDataFactory.a6804de0.js";import"./index.af9e0f6e.js";import"./mitt.4e333a4b.js";import"./date.a0df01d2.js";import"./format.c860d4da.js";function p(t){return!t.refuels||t.refuels.length===0?0:t.refuels.map(e=>e.distanceDriven).reduce((e,r)=>e+r)}function h(t){return!t.refuels||t.refuels.length===0?0:t.refuels.map(e=>e.refueledAmount).reduce((e,r)=>e+r)}function F(t){if(!t.refuels||t.refuels.length===0)return 0;const e=t.refuels.map(n=>n.payedAmount).reduce((n,l)=>n+l),r=t.refuels.map(n=>n.refueledAmount).reduce((n,l)=>n+l);return e/r}function U(t){return!t.refuels||t.refuels.length===0?0:+t.refuels.map(e=>e.payedAmount).reduce((e,r)=>e+r).toString()}function y(t){return!t.refuels||t.refuels.length===0?0:t.refuels.length}function x(){const t=f();(async()=>{const e=await c.settings.toArray();if(!e[0])return Promise.resolve();if(t.changeColorTheme(e[0].colorThemeId),t.changeDistanceUnit(e[0].distanceUnitId),e[0].vehicleId){const r=await c.vehicles.where("id").equals(e[0].vehicleId).toArray();t.changeSelectedVehicle(r[0])}t.togglePlateNumberInTitle(e[0].plateNumberInTitleActive)})()}class s extends d{constructor(e){super(),this.vehicle=e,this.title=this.setTitle(),this.value=this.calculateValue(this.vehicle),this.unit=this.getUnit(this.vehicle)}setTitle(){return""}calculateValue(e){return""}getUnit(e){return""}}class D extends s{constructor(e){super(e),this.vehicle=e}setTitle(){return"Fuel consumption"}calculateValue(e){return g(e).toFixedIfNotZero(2)}getUnit(e){var r,n;return(n=(r=e.fuelUnit)==null?void 0:r.fuelConsumptionUnit)!=null?n:""}}class I extends s{constructor(e){super(e),this.vehicle=e}setTitle(){return"Distance driven"}calculateValue(e){return p(e).toFixedIfNotZero(1)}getUnit(e){var r,n;return(n=(r=e.fuelUnit)==null?void 0:r.distanceUnit)!=null?n:""}}class P extends s{constructor(e){super(e),this.vehicle=e}setTitle(){return"Fuel burnt"}calculateValue(e){return h(e).toFixedIfNotZero(1)}getUnit(e){var r,n;return(n=(r=e.fuelUnit)==null?void 0:r.fuelUnit)!=null?n:""}}class T extends s{constructor(e){super(e),this.vehicle=e}setTitle(){return"Refuels made"}calculateValue(e){return y(e).toString()}getUnit(){return""}}class v extends s{constructor(e){super(e),this.vehicle=e}setTitle(){return"Fuel pricing"}calculateValue(e){return F(e).toFixedIfNotZero(2)}getUnit(e){var r;return`${e.currencyUnit}/${(r=e.fuelUnit)==null?void 0:r.fuelUnit}`}}class A extends s{constructor(e){super(e),this.vehicle=e}setTitle(){return"Money spent"}calculateValue(e){return U(e).toFixedIfNotZero(2)}getUnit(e){return e.currencyUnit}}function S(){i.register("1",D),i.register("2",I),i.register("3",A),i.register("4",v),i.register("5",P),i.register("6",T)}function V(t,e){return o(t,e)}function G(t,e){return a(t,e)}function N(t,e){return a(t,e)}function C(t,e){return o(t,e)}function M(t,e){return o(t,e)}function b(t,e){return t/e}function o(t,e){return t*100/e}function a(t,e){return e/t}function w(){u.register("1",V),u.register("2",G),u.register("3",N),u.register("4",C),u.register("5",M),u.register("6",b)}x();const Z=m();Z.readFilter();S();w();
